---
Author: Apollon77
imageSource: https://pixabay.com/photos/building-control-panel-controls-1853330/
title: js-controller 2.0
logo: de/blog/images/2019_10_14.jpg
translatedFrom: de
hash: A+LZ+Fj5MD7rgI3eWEuWvmYZfYnAoinTs+6gQIvOdvw=
---
Hello ioBroker community,
<!-- SOURCE: 867436 Hello ioBroker community, -->

to reach the **30.000** active installations brand a few days ago we would like to present you the new js-controller 2.0. It is now available in the Latest Repository and on npm.
<!-- SOURCE: 402413 to reach the **30.000** active installations brand a few days ago we would like to present you the new js-controller 2.0. It is now available in the Latest Repository and on npm. -->

In an internal test and a very extensive beta test in the community we have already tested this big update of the js-controller very intensively. Many thanks to @Arteck, @ sigi234, @SBorg, @opossum, @ e-s, @ e-i-k-e, @Yetiberg, @ Jan1, @ Einstein67, @Dr. Bacterius and many more. That was a great collaboration!
<!-- SOURCE: 540517 In an internal test and a very extensive beta test in the community we have already tested this big update of the js-controller very intensively. Many thanks to @Arteck, @ sigi234, @SBorg, @opossum, @ e-s, @ e-i-k-e, @Yetiberg, @ Jan1, @ Einstein67, @Dr. Bacterius and many more. That was a great collaboration! -->

Above all, "under the hood", some fundamental changes have been incorporated, justifying the change to a new major release number. More below.
<!-- SOURCE: 548903 Above all, "under the hood", some fundamental changes have been incorporated, justifying the change to a new major release number. More below. -->

The js-controller 2.0 is generally compatible with all existing ioBroker systems. It can be upgraded from any previous version to version 2.0. Only the Node.js version must be raised before the update at least 8.x, better still 10.x! For Node.js 12 it is still a bit too early, as some adapters are still not compatible.
<!-- SOURCE: 788980 The js-controller 2.0 is generally compatible with all existing ioBroker systems. It can be upgraded from any previous version to version 2.0. Only the Node.js version must be raised before the update at least 8.x, better still 10.x! For Node.js 12 it is still a bit too early, as some adapters are still not compatible. -->

Furthermore, the ioBroke own file space (normally under <ioBroker directory> / iobroker-data / files / ...) is now treated more strictly and manually or by script (fs.write) there directly stored / hinkopierte files are possibly . no longer displayable in visualizations! Scripts must be adapted (use of writeFile) or the files must be stored in officially defined adpater base directories (for example, vis.0, iqontrol.meta, etc.). It is also best to use the official uploaders via Vis or iqontrol so that these files are registered correctly. This change was also implemented to increase security! The positive side effect is also that the files then land in the backup, which was not previously available!
<!-- SOURCE: 624789 Furthermore, the ioBroke own file space (normally under <ioBroker directory> / iobroker-data / files / ...) is now treated more strictly and manually or by script (fs.write) there directly stored / hinkopierte files are possibly . no longer displayable in visualizations! Scripts must be adapted (use of writeFile) or the files must be stored in officially defined adpater base directories (for example, vis.0, iqontrol.meta, etc.). It is also best to use the official uploaders via Vis or iqontrol so that these files are registered correctly. This change was also implemented to increase security! The positive side effect is also that the files then land in the backup, which was not previously available! -->

## Installation
<!-- SOURCE: 992937 ## Installation -->
Before installation As with any update of this kind: Please make a backup! iobroker backup, or copying the iobroker-data directory are also sufficient in case of doubt (ioBroker stop before of course). Please do not copy the node_modules directory, otherwise symbolic links can break, leading to bigger problems afterwards.
<!-- SOURCE: 977716 Before installation As with any update of this kind: Please make a backup! iobroker backup, or copying the iobroker-data directory are also sufficient in case of doubt (ioBroker stop before of course). Please do not copy the node_modules directory, otherwise symbolic links can break, leading to bigger problems afterwards. -->

### Necessary adapter updates
<!-- SOURCE: 531397 ### Necessary adapter updates -->
The following adapters have to be updated to the mentioned minimum version numbers, otherwise they will not work with the js-controller 2.0. It is best to run these updates first, because all of these versions work well with the old js-controller versions.
<!-- SOURCE: 951613 The following adapters have to be updated to the mentioned minimum version numbers, otherwise they will not work with the js-controller 2.0. It is best to run these updates first, because all of these versions work well with the old js-controller versions. -->

- simple-api 2.1.2 or higher
<!-- SOURCE: 82139 - simple-api 2.1.2 or higher -->
- email 1.0.5 or higher
<!-- SOURCE: 366959 - email 1.0.5 or higher -->
- pushover 1.1.1 or higher
<!-- SOURCE: 265223 - pushover 1.1.1 or higher -->
- hue 1.2.4 or higher
<!-- SOURCE: 605231 - hue 1.2.4 or higher -->
- node-red 1.10.1 or higher
<!-- SOURCE: 881137 - node-red 1.10.1 or higher -->
- vis 1.2.1 or higher
<!-- SOURCE: 870171 - vis 1.2.1 or higher -->
- iqontrol 0.2.6 or higher
<!-- SOURCE: 893159 - iqontrol 0.2.6 or higher -->
- socketio 2.1.2 or higher
<!-- SOURCE: 138473 - socketio 2.1.2 or higher -->
- radar2 1.0.9 (GitHub version 1.2.0 has to be adjusted manually, see FAQ!)
<!-- SOURCE: 661372 - radar2 1.0.9 (GitHub version 1.2.0 has to be adjusted manually, see FAQ!) -->
- broadlink2 (see FAQ)
<!-- SOURCE: 112362 - broadlink2 (see FAQ) -->

*** ATTENTION: SLAVE SYSTEM FIRST! ***
<!-- SOURCE: 202904 *** ATTENTION: SLAVE SYSTEM FIRST! *** -->

With a multi-host system, when updating to version 2.0 it is very important to update the slave systems first. The master is updated last!
<!-- SOURCE: 121017 With a multi-host system, when updating to version 2.0 it is very important to update the slave systems first. The master is updated last! -->

If this order is not adhered to, the slave systems can not connect to the master and the update must be carried out manually (for details see FAQ Post).
<!-- SOURCE: 396110 If this order is not adhered to, the slave systems can not connect to the master and the update must be carried out manually (for details see FAQ Post). -->

### Windows
<!-- SOURCE: 391795 ### Windows -->
On systems set up with the new Windows Installer, the js-controller must not be updated to npm. There will be a new version of the Windows Installer, which allows the update of the js-controller with a few mouse clicks. We update here in the thread.
<!-- SOURCE: 86464 On systems set up with the new Windows Installer, the js-controller must not be updated to npm. There will be a new version of the Windows Installer, which allows the update of the js-controller with a few mouse clicks. We update here in the thread. -->

For all "old manual" installations the same ioBroker own iobroker upgrade self command applies as usual.
<!-- SOURCE: 45069 For all "old manual" installations the same ioBroker own iobroker upgrade self command applies as usual. -->

### Linux
<!-- SOURCE: 517642 ### Linux -->
As usual, the update will be done via iobroker upgrade self.
<!-- SOURCE: 543377 As usual, the update will be done via iobroker upgrade self. -->

In case of errors: If the Linux installation fails due to lack of access rights, it is best to use the installation fixer and repeat the installation.
<!-- SOURCE: 368224 In case of errors: If the Linux installation fails due to lack of access rights, it is best to use the installation fixer and repeat the installation. -->

```
curl -sL https://iobroker.net/fix.sh | bash -
```
<!-- ID: 515641 -->

If there are still errors afterwards, please try the installation again with `sudo -H -u iobroker npm install iobroker.js-controller`. Please report such cases here in the thread.
<!-- SOURCE: 863021 If there are still errors afterwards, please try the installation again with §§SSSSS_0§§. Please report such cases here in the thread. -->

## After installation
<!-- SOURCE: 155106 ## After installation -->
After the installation restart the ioBroker (for example via iobroker start).
<!-- SOURCE: 666293 After the installation restart the ioBroker (for example via iobroker start). -->

If all goes well you will notice no difference except the higher version number in the admin view in the admin. Everything will continue to work as before. All adapter instances start and work. If that is so, everything worked out. The big changes are all hidden under the hood.
<!-- SOURCE: 806784 If all goes well you will notice no difference except the higher version number in the admin view in the admin. Everything will continue to work as before. All adapter instances start and work. If that is so, everything worked out. The big changes are all hidden under the hood. -->

In addition, what brings you all the innovations, you will find below in this text information. New functions as a basis for further developments were carefully integrated and specific problems were addressed.
<!-- SOURCE: 145066 In addition, what brings you all the innovations, you will find below in this text information. New functions as a basis for further developments were carefully integrated and specific problems were addressed. -->

With iobroker help, a list of possible command line commands is displayed, which has become longer with version 2.0.
<!-- SOURCE: 821119 With iobroker help, a list of possible command line commands is displayed, which has become longer with version 2.0. -->

## What has changed, what to watch / test?
<!-- SOURCE: 235144 ## What has changed, what to watch / test? -->
One of the major changes is that ioBroker's own States and Objects databases have been completely rewritten. The ioBroker system now uses a TCP-based and Redis-compatible protocol for communication. Especially "Reconnection from DB" errors should now be a thing of the past. Based on these changes, we are planning some interesting innovations for the future.
<!-- SOURCE: 58063 One of the major changes is that ioBroker's own States and Objects databases have been completely rewritten. The ioBroker system now uses a TCP-based and Redis-compatible protocol for communication. Especially "Reconnection from DB" errors should now be a thing of the past. Based on these changes, we are planning some interesting innovations for the future. -->

Due to this change is now in logs partially "connected to redis" although you do not use any Redis. However, you can still discover it on the port if it is the ioBroker database (usually ports 9000 and 9001). First tests have shown that the CPU load on the adapter processes and the js-controller is lower than in the old version, because the new protocol is much slimmer. It is still more flexible and robust - as long as the network connection does not break. But even in such a case, an automatic reconnect should take place and, if the abort is not too long, any changes from the time without connections will be retransmitted.
So in case you've been plagued by "Reconnect to DB" messages and effects in the past, your report is very interesting to us.
<!-- SOURCE: 337955 Due to this change is now in logs partially "connected to redis" although you do not use any Redis. However, you can still discover it on the port if it is the ioBroker database (usually ports 9000 and 9001). First tests have shown that the CPU load on the adapter processes and the js-controller is lower than in the old version, because the new protocol is much slimmer. It is still more flexible and robust - as long as the network connection does not break. But even in such a case, an automatic reconnect should take place and, if the abort is not too long, any changes from the time without connections will be retransmitted.
So in case you've been plagued by "Reconnect to DB" messages and effects in the past, your report is very interesting to us. -->

Likewise the notorious "Error 7", which appears in the log if an adapter process is already running, but a new one should be started was improved. If a new process is to be started, processes that are still running should automatically end themselves and generate a one-time message in the log.
<!-- SOURCE: 818546 Likewise the notorious "Error 7", which appears in the log if an adapter process is already running, but a new one should be started was improved. If a new process is to be started, processes that are still running should automatically end themselves and generate a one-time message in the log. -->

As I said, many changes took place behind the scenes. Here for interested as a spoiler a summary:
<!-- SOURCE: 895608 As I said, many changes took place behind the scenes. Here for interested as a spoiler a summary: -->

## 2.0 - Release Bella
<!-- SOURCE: 268869 ## 2.0 - Release Bella -->
### Breaking changes
<!-- SOURCE: 349413 ### Breaking changes -->
Minimum requirement for js-controller 2.0 is node.js 8.x Files in iobroker-data / files are only supported in officially registered directories New user features
<!-- SOURCE: 897000 Minimum requirement for js-controller 2.0 is node.js 8.x Files in iobroker-data / files are only supported in officially registered directories New user features -->

- Add Compact Mode and compact groups (Technology Preview)
<!-- SOURCE: 763210 - Add Compact Mode and compact groups (Technology Preview) -->
- Add build-in Alias handling for Objects / States (Technology Preview)
<!-- SOURCE: 391244 - Add build-in Alias handling for Objects / States (Technology Preview) -->
- Add support to Redis for Objects and Files
<!-- SOURCE: 170065 - Add support to Redis for Objects and Files -->
- Add Redis sentinel support
<!-- SOURCE: 834226 - Add Redis sentinel support -->
- Allow dynamic change of Loglevel for adapter instance and js-controller hosts processes
<!-- SOURCE: 813079 - Allow dynamic change of Loglevel for adapter instance and js-controller hosts processes -->
- Add optional migration for State and / or Objects values when using setup custom
<!-- SOURCE: 549492 - Add optional migration for State and / or Objects values when using setup custom -->
- Add monitoring for event loop lag as host and adapter objects
<!-- SOURCE: 881854 - Add monitoring for event loop lag as host and adapter objects -->
- Add possibility to validate backup files
<!-- SOURCE: 911506 - Add possibility to validate backup files -->
- Support command "iobroker logs"
<!-- SOURCE: 439067 - Support command "iobroker logs" -->
- Support command "cert create"
<!-- SOURCE: 322051 - Support command "cert create" -->
- Remember installation location for reinstallations
<!-- SOURCE: 921545 - Remember installation location for reinstallations -->
- Use Remembered installation location for automatic adapter installs
<!-- SOURCE: 445217 - Use Remembered installation location for automatic adapter installs -->
- Log Process ID for all adapter log messages
<!-- SOURCE: 519796 - Log Process ID for all adapter log messages -->
- Enhance some CLI commands like iobroker status
<!-- SOURCE: 946761 - Enhance some CLI commands like iobroker status -->
- New adapter developer features
<!-- SOURCE: 2669 - New adapter developer features -->

Streamline redis vs file handling which was different before before controller 2.0:
<!-- SOURCE: 565150 Streamline redis vs file handling which was different before before controller 2.0: -->

- not set states will always return zero now
<!-- SOURCE: 970837 - not set states will always return zero now -->
- States wants to set to zero completely (not only value) when they expire
<!-- SOURCE: 926824 - States wants to set to zero completely (not only value) when they expire -->
- States wants to be published toChanged handlers when states are in Redis
<!-- SOURCE: 947957 - States wants to be published toChanged handlers when states are in Redis -->
- Add adapter.supportsFeature ('NAME') method to check if a certain feature exists. # 244
<!-- SOURCE: 145470 - Add adapter.supportsFeature ('NAME') method to check if a certain feature exists. # 244 -->
- Ability to define secured objects in io-pack access only via own adapter and admin. # 287
<!-- SOURCE: 352225 - Ability to define secured objects in io-pack access only via own adapter and admin. # 287 -->
- Added getObjectView and getObjectViewAsync on adapter object
<!-- SOURCE: 153624 - Added getObjectView and getObjectViewAsync on adapter object -->
- Added getObjectList and getObjectListAsync on adapter object
<!-- SOURCE: 976964 - Added getObjectList and getObjectListAsync on adapter object -->
- Allow the deletion of multiple objects with wildcard
<!-- SOURCE: 518992 - Allow the deletion of multiple objects with wildcard -->

setObject / setObjectNotExists now sets default value of state after object creation
<!-- SOURCE: 634858 setObject / setObjectNotExists now sets default value of state after object creation -->

- Allow getPort to check for the port on a certain host / IP
<!-- SOURCE: 69504 - Allow getPort to check for the port on a certain host / IP -->

### Further changes
<!-- SOURCE: 654155 ### Further changes -->
- Rewrite InMem databases (States & Objects) to TCP (redis compatible) protocol and deprecate socket.io version; want to be removed approx. in v2.1
<!-- SOURCE: 504514 - Rewrite InMem databases (States & Objects) to TCP (redis compatible) protocol and deprecate socket.io version; want to be removed approx. in v2.1 -->
- Add adapter handling to prevent "error 7" (adapters will stop themself as soon as PID is not as expected)
<!-- SOURCE: 701129 - Add adapter handling to prevent "error 7" (adapters will stop themself as soon as PID is not as expected) -->
- Upgrade all dependencies
<!-- SOURCE: 456045 - Upgrade all dependencies -->
- Do not chmod 777 after controller upgrade
<!-- SOURCE: 126545 - Do not chmod 777 after controller upgrade -->
- Refactoring of many CLI commands
<!-- SOURCE: 693108 - Refactoring of many CLI commands -->
- Add possibility to return zip file as a link and not as base64
<!-- SOURCE: 698248 - Add possibility to return zip file as a link and not as base64 -->
- Standardize error codes
<!-- SOURCE: 123628 - Standardize error codes -->
- Root should always npm install with --unsafe-perm
<!-- SOURCE: 71587 - Root should always npm install with --unsafe-perm -->
- Enable gzip to read repositories
<!-- SOURCE: 192852 - Enable gzip to read repositories -->
- Read hash of sources.json online before downloading the whole file
<!-- SOURCE: 784252 - Read hash of sources.json online before downloading the whole file -->
- Add some information about user-agent
<!-- SOURCE: 883399 - Add some information about user-agent -->
- Verify the version of node.js by starting the instance
<!-- SOURCE: 962594 - Verify the version of node.js by starting the instance -->
- Hide cmd window on windows
<!-- SOURCE: 149728 - Hide cmd window on windows -->
- Include certificate creation in setup first
<!-- SOURCE: 95409 - Include certificate creation in setup first -->
- Suppress warning by npm install
<!-- SOURCE: 618227 - Suppress warning by npm install -->
- Allow optional dependencies being installed
<!-- SOURCE: 385708 - Allow optional dependencies being installed -->
- Optimize setup custom command and add more user guidance
<!-- SOURCE: 288477 - Optimize setup custom command and add more user guidance -->
- Add Feature overview to README
<!-- SOURCE: 26127 - Add Feature overview to README -->
- Forward upload console outputs from slave to master
<!-- SOURCE: 61494 - Forward upload console outputs from slave to master -->
- Make sure to upload and upgrade all adapters
<!-- SOURCE: 388539 - Make sure to upload and upgrade all adapters -->
- Always upgrade instance objects after successful installs or upgrades
<!-- SOURCE: 828363 - Always upgrade instance objects after successful installs or upgrades -->
- Optimize adapter start processes, especially when combined with needed automatic installations of adapters
<!-- SOURCE: 459665 - Optimize adapter start processes, especially when combined with needed automatic installations of adapters -->
- After 2 installation tries with "last-installedFrom" use the installed version field to try to install from npm
<!-- SOURCE: 125061 - After 2 installation tries with "last-installedFrom" use the installed version field to try to install from npm -->
- Hhosts now ignore object changes when the affected instances is silent in installQueue
<!-- SOURCE: 175564 - Hhosts now ignore object changes when the affected instances is silent in installQueue -->
- Code refactoring and optimizations in various places
<!-- SOURCE: 229542 - Code refactoring and optimizations in various places -->
- Randomize Certificate Serial numbers
<!-- SOURCE: 704331 - Randomize Certificate Serial numbers -->
- delay parallel start of scheduled instances to prevent system overload scenarios (same rules as for adapter start, basically 4s delay)
<!-- SOURCE: 499574 - delay parallel start of scheduled instances to prevent system overload scenarios (same rules as for adapter start, basically 4s delay) -->

### Bug fixes
<!-- SOURCE: 463735 ### Bug fixes -->
- Log scheduled restarts as info only (fixes # 315)
<!-- SOURCE: 782015 - Log scheduled restarts as info only (fixes # 315) -->
- Fixed # 340 to maintain restartSchedule on updates
<!-- SOURCE: 191839 - Fixed # 340 to maintain restartSchedule on updates -->

Fixed a bug where it possible to set "ack" to any value via cli
<!-- SOURCE: 452157 Fixed a bug where it possible to set "ack" to any value via cli -->

- Enable ESLint and fix most issues
<!-- SOURCE: 874077 - Enable ESLint and fix most issues -->
- Optimize multi host upload
<!-- SOURCE: 139769 - Optimize multi host upload -->
- Restart stopped adapters at the end of the upload and did not prior to upgrade
<!-- SOURCE: 214281 - Restart stopped adapters at the end of the upload and did not prior to upgrade -->
- Enhance checks for failed installations in cli and controller
<!-- SOURCE: 149794 - Enhance checks for failed installations in cli and controller -->
- update adapter instance statistic objects when no instanceObejcts are defined
<!-- SOURCE: 35920 - update adapter instance statistic objects when no instanceObejcts are defined -->
- ".alive" state values are checked on adapter start if ack = true to allow to start a process if not running
<!-- SOURCE: 926387 - ".alive" state values are checked on adapter start if ack = true to allow to start a process if not running -->
- Fix for mutlihost detection
<!-- SOURCE: 569466 - Fix for mutlihost detection -->
- Fix backup of states
<!-- SOURCE: 571230 - Fix backup of states -->
- Make sure so VIS global CSS is included in backup and restored
<!-- SOURCE: 576020 - Make sure so VIS global CSS is included in backup and restored -->
- Many more fixes in various places
<!-- SOURCE: 726523 - Many more fixes in various places -->

More details about the changes and bug fixes can be found in the changelog.
<!-- SOURCE: 110506 More details about the changes and bug fixes can be found in the changelog. -->

## How to report an error?
<!-- SOURCE: 653658 ## How to report an error? -->
If you are unsure if there is an error, it is best to describe the problem here in the thread. So we can all try to understand the problem and narrow down if necessary.
<!-- SOURCE: 602450 If you are unsure if there is an error, it is best to describe the problem here in the thread. So we can all try to understand the problem and narrow down if necessary. -->

As soon as an error occurs that ends in an error message or a crash with error details in the log or on the command line, then it is best to directly open a GitHub issue in the js-controller project and additionally post it here in the thread. The more detailed information in the issue (exact error messages / logs, info on the DB configuration used (file (file, file / redis, redis / redis ...), information about the OS and Node.js environment as well as exact steps to Reproduction of the problem), the faster we can circling and fixing errors.
<!-- SOURCE: 476331 As soon as an error occurs that ends in an error message or a crash with error details in the log or on the command line, then it is best to directly open a GitHub issue in the js-controller project and additionally post it here in the thread. The more detailed information in the issue (exact error messages / logs, info on the DB configuration used (file (file, file / redis, redis / redis ...), information about the OS and Node.js environment as well as exact steps to Reproduction of the problem), the faster we can circling and fixing errors. -->

## Overview of some of the new features
<!-- SOURCE: 233576 ## Overview of some of the new features -->
### 1.Compact Mode and Compact Groups
<!-- SOURCE: 62195 ### 1.Compact Mode and Compact Groups -->
One of the big advantages of ioBroker is that each adapter runs as a separate process. This makes the system very stable - in case of problems these only affect one adapter and not the whole system. On the other hand, this approach also requires a little more RAM. For systems with little available RAM (such as Raspi Nano or Raspi 1 with 512MB RAM), which are often used as slave systems, the number of adapters is limited.
<!-- SOURCE: 149031 One of the big advantages of ioBroker is that each adapter runs as a separate process. This makes the system very stable - in case of problems these only affect one adapter and not the whole system. On the other hand, this approach also requires a little more RAM. For systems with little available RAM (such as Raspi Nano or Raspi 1 with 512MB RAM), which are often used as slave systems, the number of adapters is limited. -->

Compact mode solves this problem by running multiple adapters together in one process, significantly reducing RAM requirements (saving approximately 20-30MB per adapter instance). However, this is at the expense of stability, since a faulty adapter also affects all other adapters in the same process and this may also restart.
<!-- SOURCE: 108978 Compact mode solves this problem by running multiple adapters together in one process, significantly reducing RAM requirements (saving approximately 20-30MB per adapter instance). However, this is at the expense of stability, since a faulty adapter also affects all other adapters in the same process and this may also restart. -->

Adapter instances can be split into multiple groups to spread the risk. Each group starts its own process, in which all instances of this group are then executed. The group 0 is special. Being a member here means that the adapter in question is running in the main js-controller process. This results in the largest RAM savings - but also the biggest risk, as a faulty adapter can adversely affect the js controller. By default, instances in group 1 are executed when the Compact mode is enabled for the corresponding instance.
<!-- SOURCE: 964972 Adapter instances can be split into multiple groups to spread the risk. Each group starts its own process, in which all instances of this group are then executed. The group 0 is special. Being a member here means that the adapter in question is running in the main js-controller process. This results in the largest RAM savings - but also the biggest risk, as a faulty adapter can adversely affect the js controller. By default, instances in group 1 are executed when the Compact mode is enabled for the corresponding instance. -->

Whether an adapter supports Compact mode depends on the adapter. This information will still be included in the adapter list in the future. Currently, only adapters that run as daemon are also started in compact mode (ie no scheduled adapters). Even if the adapter generally supports the Compact Mode, the use must be activated individually for each instance!
<!-- SOURCE: 189002 Whether an adapter supports Compact mode depends on the adapter. This information will still be included in the adapter list in the future. Currently, only adapters that run as daemon are also started in compact mode (ie no scheduled adapters). Even if the adapter generally supports the Compact Mode, the use must be activated individually for each instance! -->

There is currently no support for configuring the Compact mode in the Admin. The configuration is done by command line call. The most important commands are:
<!-- SOURCE: 871503 There is currently no support for configuring the Compact mode in the Admin. The configuration is done by command line call. The most important commands are: -->

`iobroker compact enable` to generally activate the Compact mode for the current js-controller host. ioBroker must be restarted for the change to take effect.
<!-- SOURCE: 90427 §§SSSSS_0§§ zum generellen Aktivieren des Compact Modus für den aktuellen js-controller Host. ioBroker muss danach neu gestartet werden, damit die Änderung aktiv wird. -->

`iobroker list instances` now also displays the status of the compact mode of the adapter instances.
<!-- SOURCE: 215911 §§SSSSS_0§§ zeigt zusätzliche jetzt auch den Status des Compact Modus der Adapterinstanzen an. -->

`iobroker compact <adaptername>.<instance>` status indicates the compact mode status of the instance.
<!-- SOURCE: 822056 §§SSSSS_0§§ status zeigt den Compact Modus Status der Instanz an. -->

`iobroker compact <adaptername>.<instance> enable 1` activates execution in Compact mode in group "1". Only the adapter will be restarted. This configuration can be done while the ioBroker is running.
<!-- SOURCE: 792559 §§SSSSS_0§§ aktiviert die Ausführung im Compact Modus in Gruppe „1“. Nur der Adapter wird dabei neu gestartet. Diese Konfiguration kann bei laufendem ioBroker erfolgen. -->

If there are problems (for example, an adapter does not run clean or "hang" while stopping), please open an issue with the adapter. Otherwise, please post here in the thread, so we see what it is.
<!-- SOURCE: 494 Falls es Probleme gibt (z.B. ein Adapter läuft nicht mehr sauber oder bleibt "hängen" beim Stoppen), dann bitte ein Issue beim Adapter öffnen. Ansonsten bitte hier im Thread posten, damit wir sehen, woran es liegt. -->

### 2. Installation source of adapters is saved
<!-- SOURCE: 730867 ### 2. Installation source of adapters is saved -->
ioBroker adapters are typically installed from the npm latest or stable repository. If an adapter needs to be moved to another host or the system needs to be reinstalled, an attempt will be made to install the same version of npm again. Normally, that works too. However, if an adapter was installed by GitHub on a trial basis, that version or version might not be available on npm. Thus, the same version can not be reinstalled automatically. This is changing now.
<!-- SOURCE: 547135 ioBroker adapters are typically installed from the npm latest or stable repository. If an adapter needs to be moved to another host or the system needs to be reinstalled, an attempt will be made to install the same version of npm again. Normally, that works too. However, if an adapter was installed by GitHub on a trial basis, that version or version might not be available on npm. Thus, the same version can not be reinstalled automatically. This is changing now. -->

For all new adapter installations after the update, ioBroker remembers the exact GitHub state of a custom installation and can then install this version again.
<!-- SOURCE: 60184 For all new adapter installations after the update, ioBroker remembers the exact GitHub state of a custom installation and can then install this version again. -->

Also at the adapter installation itself, the upload and the like a lot has been revised and optimized. Fixed some special cases where parts of the upload logic were not executed correctly. Again, help with your tests.
<!-- SOURCE: 722049 Also at the adapter installation itself, the upload and the like a lot has been revised and optimized. Fixed some special cases where parts of the upload logic were not executed correctly. Again, help with your tests. -->

### 3. Redis support now also for objects and files
<!-- SOURCE: 665940 ### 3. Redis support now also for objects and files -->
By default, objects and states are maintained in an ioBroker storage database and stored in JSON files. With this own solution, no additional software is needed.
<!-- SOURCE: 541420 By default, objects and states are maintained in an ioBroker storage database and stored in JSON files. With this own solution, no additional software is needed. -->

For some time now, it has already been possible to save states in an optimized Redis database. From a certain number of state changes per second, Redis can reduce the overall system load or distribute it to multiple systems. Redis, however, also brings with it an additional effort, since this software wants to be installed, managed and secured, so that there is no loss of data in case of updates or problems.
<!-- SOURCE: 919780 For some time now, it has already been possible to save states in an optimized Redis database. From a certain number of state changes per second, Redis can reduce the overall system load or distribute it to multiple systems. Redis, however, also brings with it an additional effort, since this software wants to be installed, managed and secured, so that there is no loss of data in case of updates or problems. -->

With js-controller 2.0, ioBroker now also allows objects and the files that are currently stored on the master system in the file system to be managed in the Redis database.
<!-- SOURCE: 467440 With js-controller 2.0, ioBroker now also allows objects and the files that are currently stored on the master system in the file system to be managed in the Redis database. -->

Important: Especially the transfer of files to the database can lead to it becoming quite large (like several hundred MB). Since Redis always keeps all data in RAM, this option is only suitable for systems that have enough RAM resources available. Similarly, the CPU load will be higher for a redis / redis system because data has to be processed differently.
<!-- SOURCE: 424549 Important: Especially the transfer of files to the database can lead to it becoming quite large (like several hundred MB). Since Redis always keeps all data in RAM, this option is only suitable for systems that have enough RAM resources available. Similarly, the CPU load will be higher for a redis / redis system because data has to be processed differently. -->

Moving files to the database results in much greater flexibility. Because of this change, there is virtually no more local data in the file system. All in all, the Redis database becomes the central data storage system of the ioBroker system because it contains all the data. All js controllers and adapters then connect to this central database.
<!-- SOURCE: 209670 Moving files to the database results in much greater flexibility. Because of this change, there is virtually no more local data in the file system. All in all, the Redis database becomes the central data storage system of the ioBroker system because it contains all the data. All js controllers and adapters then connect to this central database. -->

With the js-controller 2.x even a Redis-Sentinel installation can be used to increase the system availability (quasi a Redis HA cluster). This is a first basis for providing a high availability ioBroker system that can compensate for failures of individual server components. However, this option should currently only be tested if you know what you are doing 😉 In later updates more.
<!-- SOURCE: 795839 With the js-controller 2.x even a Redis-Sentinel installation can be used to increase the system availability (quasi a Redis HA cluster). This is a first basis for providing a high availability ioBroker system that can compensate for failures of individual server components. However, this option should currently only be tested if you know what you are doing 😉 In later updates more. -->

With the introduction of the different storage possibilities for files, objects and states the command iobroker setup custom has been revised. For one thing, it shows more information. In addition, he is now also able to migrate the data in all directions when changing the data management. So a change is possible at any time.
<!-- SOURCE: 663040 With the introduction of the different storage possibilities for files, objects and states the command iobroker setup custom has been revised. For one thing, it shows more information. In addition, he is now also able to migrate the data in all directions when changing the data management. So a change is possible at any time. -->

### 4. "Alias" feature
<!-- SOURCE: 148283 ### 4. "Alias" feature -->
One of the advantages of ioBroker is that there are many adapters. However, it has been found that every adapter, e.g. Depending on the connected systems, individual structures regarding the storage of the provided data points are implemented. This brings with it particular scripts but also with visualization and cloud / iot adapters certain challenges.
When replacing devices between different manufacturers, it is sometimes necessary to adjust scripts due to changes in the data points. Visualization adapter and the iot adapter try e.g. Identify the type of devices based on the roles of data points to correctly display or report to Amazon or Google. The adapters are sometimes lost, because certain adapters have information about roles and the like. can not deliver - especially MQTT, modbus, etc. are affected here.
<!-- SOURCE: 555636 One of the advantages of ioBroker is that there are many adapters. However, it has been found that every adapter, e.g. Depending on the connected systems, individual structures regarding the storage of the provided data points are implemented. This brings with it particular scripts but also with visualization and cloud / iot adapters certain challenges.
When replacing devices between different manufacturers, it is sometimes necessary to adjust scripts due to changes in the data points. Visualization adapter and the iot adapter try e.g. Identify the type of devices based on the roles of data points to correctly display or report to Amazon or Google. The adapters are sometimes lost, because certain adapters have information about roles and the like. can not deliver - especially MQTT, modbus, etc. are affected here. -->

The alias feature anchored directly in the js controller provides the new namespace "alias.0" for objects. The feature allows you to create devices with a stable structure and clean roles. This is done first manually, later also e.g. using the upcoming "Devices" adapter, which is currently under development.
<!-- SOURCE: 88742 The alias feature anchored directly in the js controller provides the new namespace "alias.0" for objects. The feature allows you to create devices with a stable structure and clean roles. This is done first manually, later also e.g. using the upcoming "Devices" adapter, which is currently under development. -->

Also this feature does not have complete support in the admin, which will come however still.
<!-- SOURCE: 484863 Also this feature does not have complete support in the admin, which will come however still. -->

After defining the alias object, the new area common.alias can be used to define the ID of the source object in the respective adapter. From then on all data will be synchronized in both directions between the objects. In addition, interestingly, a read and write function can be defined to perform simple conversions (e.g., Wh &lt;--&gt; kWh).
<!-- SOURCE: 507707 Nach der Definition des Alias-Objects kann im neuen Bereich common.alias die ID des Quellobjekts im jeweiligen Adapter definiert werden. Ab dann werden alle Daten in beide Richtungen zwischen den Objekten synchronisiert. Zusätzlich kann interessanterweise eine read und write Funktion definiert werden, um einfache Umrechnungen vorzunehmen (z.B. Wh &lt;--&gt; kWh). -->

Further (technical) details were published under Alias Information in the js-controller README.
<!-- SOURCE: 970076 Further (technical) details were published under Alias Information in the js-controller README. -->