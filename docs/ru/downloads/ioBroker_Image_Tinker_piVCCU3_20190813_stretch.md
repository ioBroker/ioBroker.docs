---
translatedFrom: de
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/downloads/ioBroker_Image_Tinker_piVCCU3_20190813_stretch.md
title: Изображение ioBroker для Tinkerboard (S) с piVCCU 20190813
hash: 1SCL2XASshAYgQH+eZvQbYb/unN6Uo3fEWCpN2W2/zw=
---
# IoBroker Изображение для Tinkerboard (S) с piVCCU 20190813
## Создание карты μ-SD
Это универсальное изображение SD-карты для Homematic с ioBroker на Asus Tinkerboard или Tinkerboard S.

Изображение было создано на Tinkerboard, но также должно работать на всех упомянутых. Подходит для карт объемом 4 ГБ и более. Тем не менее, рекомендуемый минимальный размер - 8 ГБ. В любом случае рекомендуется использовать карты емкостью 16 ГБ, чтобы не всегда описывались одни и те же ячейки, что приведет к более быстрому износу карты SD.

Изображение распаковывается, а затем записывается на SD-карту с помощью программы Balena Etcher. Etcher доступен для разных операционных систем.

## Компоненты изображения
Образ содержит Raspbian lite, основанный на Debian 9 "Stretch" от 03.04.2019 после загрузки с https://dl.armbian.com/tinkerboard/Debian_stretch_default.7z.

Кроме того, были установлены пакеты, необходимые для некоторых адаптеров.

Также включен piVCCU3 от 19.07.2019 после загрузки с https://www.pivccu.de/images/?dir=piVCCU3

Следующий пользователь создан:

* Пользователь: `pi`,
* Пароль: `Малина`

Node-js устанавливается в версии 10.16.2 и, конечно, iobroker через установщик с js-контроллером в соответствии со стабильным репозиторием от 13.08.2019.

Это **минимальная установка** которая содержит **только администратора и адаптера обнаружения** дополнительные адаптеры и их экземпляры еще предстоит создать и настроить.

Создание дополнительных адаптеров и их экземпляров описано в [здесь](/tutorial/adapter.md).

** Примечание! ** Следующие инструкции были сделаны, насколько нам известно, с информацией на момент создания изображения. Обновления пакетов или ядра могут изменить что угодно в любое время.

Изображение локализовано для Германии. При использовании в других средах, пожалуйста, отрегулируйте соответственно. (`sudo raspi-config`; 4.) `Localisation Options`)

## После первого запуска
Если вам не предлагается создать новый пароль для пользователя root и нового пользователя после первого запуска Tinkerboard, выполните следующие действия в целях безопасности:

- Чтобы использовать полный размер карты памяти, вы должны запустить файловую систему с помощью `sudo / usr / lib / armbian / armbian-resize-filesystem`

  к размеру SD-карты.

- Возможно, уже есть обновления для базового Linux и для nodejs. Чтобы обновить это

на консоли выполните следующие действия: `sudo apt-get update && sudo apt-get upgrade -y`

- Обязательно измените пароль root с помощью `sudo passwd root` Затем введите пароль по умолчанию` 1234`, а затем

введите новый пароль и подтвердите на следующем шаге.

- Это также относится к пользователю `pi`. Это изменяется с помощью `sudo passwd pi`, за которым следует пароль по умолчанию` raspberry`

а затем введите новый пароль и подтвердите на следующем шаге.

Дополнительные настройки можно выполнить с помощью утилиты настройки, которая вызывает:

`sudo armbian-config`

Больше информации об этой утилите в [https://docs.armbian.com/User-Guide_Armbian-Config/](https://docs.armbian.com/User-Guide_Armbian-Config/)

## Обновление системы
Поскольку, возможно, прошло некоторое время с момента создания образа во время загрузки, вам следует сначала обновить систему.

Чтобы обновить Linux и nodejs до последних версий, вы можете сделать следующее на консоли:

```sudo apt-get update && sudo apt-get upgrade -y```

Кроме того, вы должны проверить, есть ли уже обновления для уже установленных адаптеров и контроллера js (см. Вкладку Хосты).

В дополнение к наименьшему возможному размеру изображения это также причина того, что только несколько адаптеров уже предустановлены.

В таких случаях всегда сначала запускайте js-контроллер через консоль в соответствии с инструкциями на вкладке «Хосты», затем при необходимости администратор адаптера и все остальные адаптеры.

## Установка Redis
Эти изображения больше не содержат базу данных Redis для сохранения состояний. При слабых компьютерах и низкой оперативной памяти использование Redis в некоторых случаях значительно повышает производительность. На более быстрых компьютерах доступ к записи сокращается, что продлевает срок службы SD-карты.

Если вы хотите установить Redis, вы должны продолжить работу с текущими изображениями следующим образом.

### Установка сервера Redis
После команды:

`sudo apt install redis-server`

Готов ли сервер Redis к порту 6379?

### Переключение состояний в Redis
Использование Redis для хранения состояний в ioBroker должно быть настроено в консоли с помощью:

`iobroker setup custom`

В следующем диалоговом окне введите следующее (Внимание в 4-й строке):

```
Type of objects DB [file, couch, redis], default [file]: ENTER
Host of objects DB(file), default[127.0.0.1]: ENTER
Port of objects DB(file), default[9001]: ENTER
Type of states DB [file, redis], default [file]: r ENTER
Host of states DB (file), default[HostName]:ENTER
Port of states DB (file), default[9000]: ENTER
Host name of this machine [hostname]: ENTER
```

Специальные функции при установке в системе с несколькими хостами описаны здесь:

[Нажмите здесь](config/multihost.md)

Выпуск редиса для пользователя iobroker Адаптер backitup также может получить доступ к Redis, пользователю должны быть предоставлены необходимые права:

`sudo usermod -a -G redis iobroker`

## Установленная piVCCU3
В этом образе также установлена виртуализированная CCU3, которая позволяет управлять устройствами Homematic и HM-IP без дополнительного отдельного оборудования.
Только радиомодуль HM-MOD-RPI-PCB или RPI-RF-MOD должен быть подключен к контактному разъему Raspberry Pi.

PiVCCU получает от DHCP-сервера IP-адрес, отличный от самого RaspberryPi. Это получается с помощью команды `sudo pivccu-info`

Если вы называете этот IP-адрес, вы можете войти в интерфейс CCU3.