---
translatedFrom: de
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/downloads/ioBroker_Image_Tinker_piVCCU3_20190813_stretch.md
title: Образ ioBroker для Tinkerboard (S) с piVCCU 20190813
hash: 1SCL2XASshAYgQH+eZvQbYb/unN6Uo3fEWCpN2W2/zw=
---
# Образ ioBroker для Tinkerboard (S) с piVCCU 20190813
## Создание карты µ-SD
Это универсальный образ SD-карты для Homematic с ioBroker на Asus Tinkerboard или Tinkerboard S.

Изображение было создано на Tinkerboard, но также должно работать на всех вышеперечисленных устройствах. Подходит для карт емкостью 4 ГБ и больше. Однако 8 ГБ — это минимальный рекомендуемый размер. В любом случае рекомендуется использовать карты емкостью 16 ГБ, чтобы не всегда записывались одни и те же ячейки, что привело бы к более быстрому износу SD-карты.

Образ распаковывается и затем записывается на SD-карту с помощью программы Balena Etcher. Etcher доступен для разных операционных систем.

## Компоненты изображения
Образ содержит Raspbian lite, основанный на Debian 9 «Stretch» от 3 апреля 2019 года после загрузки с https://dl.armbian.com/tinkerboard/Debian_stretch_default.7z.

Кроме того, установлены пакеты, необходимые для некоторых адаптеров.

Также включен piVCCU3 от 19 июля 2019 г. после загрузки с https://www.pivccu.de/images/?dir=piVCCU3.

Был создан следующий пользователь:

* Пользователь: `пи`,
* Пароль: `raspberry`

Установлен Node-js версии 10.16.2 и конечно iobroker через установщик с js-контроллером из стабильного репозитория по состоянию на 13 августа 2019 года.

Это **минимальная установка**, которая содержит **только администратора и адаптер обнаружения**. Дополнительные адаптеры и их экземпляры еще необходимо создать и настроить.

Создание дополнительных адаптеров и их экземпляров описано в [здесь](/tutorial/adapter.md).

**Примечание!** Следующие инструкции были созданы, насколько нам известно, на основе информации, действовавшей на момент создания изображения. Все может измениться в любой момент благодаря обновлениям пакетов или ядра.

Изображение локализовано для Германии. При использовании в других средах внесите соответствующие изменения. (`sudo raspi-config`; 4.) `Localisation Options`)

## После первого запуска
Если после первого запуска Tinkerboard вам не будет предложено создать новый пароль для пользователя root и нового пользователя, в целях безопасности выполните следующие действия:

- Чтобы использовать весь размер карты памяти, вам необходимо запустить файловую систему с помощью `sudo /usr/lib/armbian/armbian-resize-filesystem`

  Отрегулируйте размер SD-карты.

— Обновления базового Linux и nodejs уже могут быть доступны. Чтобы обновить это

выполните в консоли следующее: `sudo apt-get update && sudo apt-get upgrade -y`

- Обязательно измените пароль root с помощью sudo passwd root. Затем введите стандартный пароль «1234», а затем.

Введите новый пароль и подтвердите его на следующем шаге.

- Это также относится и к пользователю `pi`. Вы можете изменить это с помощью `sudo passwd pi`, а затем стандартного пароля `raspberry`.

а затем введите новый пароль и подтвердите его на следующем шаге.

Дальнейшие настройки можно произвести с помощью утилиты настройки, вызвать которую можно с помощью:

`sudo armbian-config`

Дополнительную информацию об этой утилите см. в разделе [https://docs.armbian.com/User-Guide_Armbian-Config/](https://docs.armbian.com/User-Guide_Armbian-Config/).

## Обновление системы
Поскольку с момента создания образа на момент загрузки могло пройти некоторое время, первое, что вам следует сделать, это обновить систему.

Чтобы обновить Linux и nodejs до последних версий, выполните в консоли следующие действия:

```sudo apt-get update && sudo apt-get upgrade -y```

Также следует проверить, есть ли уже обновления для установленных адаптеров и js-контроллера (см. вкладку «Хосты»).

Помимо минимально возможного размера образа, это еще и причина того, что предустановлено лишь несколько адаптеров.

В таких случаях всегда сначала запускайте js-контроллер через консоль по инструкции во вкладке Hosts, затем, если необходимо, адаптер Admin и затем все остальные адаптеры.

## Установка Redis
Эти образы больше не содержат базу данных Redis для хранения состояний. На слабых компьютерах и с небольшим объемом оперативной памяти использование Redis иногда может значительно повысить производительность. На более быстрых компьютерах это уменьшает доступ к записи и, таким образом, продлевает срок службы SD-карты.

Если необходимо установить Redis, для текущих образов необходимо выполнить следующие действия.

### Установка сервера Redis
После команды:

`sudo apt install redis-server`

Сервер Redis готов и доступен на порту 6379.

### Переключение состояний на Redis
Чтобы использовать Redis для хранения состояний в ioBroker, это необходимо настроить в консоли с помощью:

`iobroker setup custom`

В следующем диалоговом окне введите следующее (внимание в 4-й строке):

```
Type of objects DB [file, couch, redis], default [file]: ENTER
Host of objects DB(file), default[127.0.0.1]: ENTER
Port of objects DB(file), default[9001]: ENTER
Type of states DB [file, redis], default [file]: r ENTER
Host of states DB (file), default[HostName]:ENTER
Port of states DB (file), default[9000]: ENTER
Host name of this machine [hostname]: ENTER
```

Здесь описаны особенности установки в многохостовой системе:

[кликните сюда](config/multihost.md)

Освобождение Redis для пользователя iobroker Чтобы, например, адаптер резервного копирования также мог получить доступ к Redis, пользователю необходимо предоставить необходимое разрешение с помощью:

`sudo usermod -a -G redis iobroker`

## Установленный piVCCU3
В этом образе также установлен виртуализированный CCU3, что позволяет управлять устройствами Homematic и HM-IP без какого-либо дополнительного отдельного оборудования.
Все, что вам нужно сделать, это подключить радиомодуль HM-MOD-RPI-PCB или RPI-RF-MOD к контактному разъему Raspberry Pi.

PiVCCU получает от DHCP-сервера другой IP-адрес, чем сам RaspberryPi. Это можно получить с помощью команды `sudo pivccu-info`.

Если вы получите доступ к этому IP-адресу, вы сможете войти в интерфейс CCU3.