---
title: ioBroker больше не работает
lastChanged: 06.06.2019
translatedFrom: de
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/trouble/RunsNoMore.md
hash: Ga+TPCA7P3xhbRocb1+yR2lK4xmO52LrGRtPR4FOCqs=
---
# IoBroker больше не работает
На форуме часто упоминается, что ioBroker больше не работает. Но это утверждение несет в себе столько же информации, как и утверждение: моя машина не ездит.

Вы не думаете, что может быть 1000 причин, по которым машина не едет: нет топлива, разряжен аккумулятор, спустило колесо и, и, и...

ioBroker очень модульный, и вы можете легко отремонтировать каждую его часть. Файлы конфигурации были удалены из каталога с пакетами Node.js, и пока этот каталог конфигурации не поврежден, с установкой ioBroker не произошло ничего серьезного.

Первое, что вы заметите, это то, что ioBroker не запускается, если не запущен «admin». Но есть более-менее четкий алгоритм, как можно проверить, что сломалось.
Проверьте, запущен ли js-контроллер:

**Линукс:**

````
Linux: ps -A | grep iobroker
````

**Окна:**

Проверьте, присутствует ли процесс node.exe в Process Explorer (показать все процессы)

Что-то вроде этого должно быть видно под Linux:

```
pi@pi:~$ ps -A | grep iobroker
1807 ? 13:59:22 iobroker.js-con
```

Если это не сработает, попробуйте запустить ioBroker с помощью

**Линукс:**

```
cd /opt/iobroker
iobroker start
```

или **Окна:**

```
cd C:\ioBroker
iobroker start
```

Если он по-прежнему не работает или вы получаете сообщения об ошибках, попробуйте запустить js-контроллер вручную.

```
cd /opt/iobroker
node node_modules/iobroker.js-controller/controller.js --logs
```

Если вы получаете сообщения об ошибках, попробуйте обновить «js-controller».

Если js-контроллер запущен, TCP-порты 9000 и 9001 должны быть заняты. Проверить это можно командой:

```
netstat -n -a -p TCP
```

Должны быть видны следующие строки:

```
TCP 0.0.0.0:9000 0.0.0.0:0 LISTENING
TCP 0.0.0.0:9001 0.0.0.0:0 LISTENING
```

При использовании Redis это должно выглядеть так:

```
TCP 0.0.0.0:6379 0.0.0.0:0 LISTENING
TCP 0.0.0.0:9001 0.0.0.0:0 LISTENING
```

Если ничего не видно (или только один), то, вероятно, порты заняты другими программами. Вы можете изменить порты в */opt/iobroker/iobroker-data/iobroker.json*. Или перенастроить другую программу.

## Переустановите адаптер или js-контроллер
Если адаптер или js-контроллер работал и остановился после обновления, возможно, с обновлением что-то пошло не так. Но вы легко можете установить адаптер снова. Все, что вам нужно сделать, это написать в консоли:

```
cd /opt/iobroker
iobroker stop adapterName
npm install iobroker.adapterName
iobroker upload adapterName
iobroker start adapterName
```

Или для js-контроллера:

```
cd /opt/iobroker
iobroker stop
npm install iobroker.js-controller
iobroker start
```

## Проверьте правильность установки node.js и npm
Если js-контроллер не запущен, возможно, node.js вообще не установлен.
Рекомендуется использовать версию node.js 14.x.

Версия Node.js 16.x прошла большую часть тестирования (по состоянию на 5 мая 2022 г.), с версией 18.x нет никакой гарантии, что она будет работать.

Заказы

```
node -v
npm -v
```

должен показывать тот же номер версии. Если это не так, вам следует удалить node.js и переустановить его. Или проверьте путь поиска.

Удаление и установка Node.js выполняется так же, как и установка ioBroker вручную (в Raspberry и других системах Linux).

Необходимые действия подробно описаны ЗДЕСЬ.

И здесь вы можете найти информацию о других системах.
Проверьте, запущен ли адаптер администратора

Сначала проверьте, активирован ли администратор:

```
cd /opt/iobroker
iobroker list instances
```

Вы должны увидеть такую строку:

```
system.adapter.admin.0 : admin - enabled, port: 8081, bind: 0.0.0.0, run as: admin
```

Если вместо «включено» написано «отключено», активировать адаптер можно следующим образом:

```
iobroker start admin
```

Если IP-адрес неверный, напишите:

```
iobroker set admin.0 --bind 0.0.0.0
```

разрешить на всех IP-адресах.

Вы также можете изменить порт:

```
iobroker set admin.0 --port 8081
```

или отключите SSL:

```
iobroker set admin.0 --secure false
```

Тогда экземпляр должен быть виден на порту (по умолчанию 8081).

С

```
netstat -n -a -p TCP
```

вы можете проверить, можно ли найти строку:

```
TCP 0.0.0.0:8081 0.0.0.0:0 LISTENING
```

Если это по-прежнему не работает, вы можете запустить вручную и посмотреть, есть ли какие-либо ошибки: cd /opt/iobroker node node_modules/iobroker.admin/admin.js --logs

В журнале тоже может быть что-то. Файл журнала можно найти по адресу ***/opt/iobroker/log/iobroker.YYYY-MM-DD.log***.

Вы можете с помощью команды

```
cd /opt/iobroker
cat log/iobroker.JJJJ-MM-TT.log
```

просмотреть файл. Разумеется, ГГГГ-ММ-ДД необходимо заменить на текущую дату. («кот» возможен только под Linux)

## Установите другой экземпляр от администратора
Если настройки консоли администратора изменены и вы больше не можете получить доступ к странице администратора, по-прежнему существует возможность установки второго экземпляра администратора.

Для этого:

```
iobroker add admin --port 8089
```

выполнять.

Здесь 8089 — это порт, который заведомо свободен. Затем вы можете связаться с администратором по адресу http://ip:8089.

После того, как настройки снова будут в порядке, вам следует удалить новый экземпляр (второй на порту 8089), чтобы сэкономить ресурсы.

## Npm исчез
>! Нечто подобное сейчас происходит с Debian (Raspbian) Buster.

Из-за проблемы с npm может случиться так, что после обновления Linux, которое обычно также включает обновление nodejs в версии скина (6.x; 8.x, 10.x), внезапно ничего больше не работает.

Например, адаптеры больше не могут быть установлены, появляется сообщение об ошибке ***npm не найден***.

В этих случаях проверьте консоль:

узел -v НПМ -v

Обычно сейчас (по состоянию на 30 июля 2019 года) версия узла — 8.15.0 и npm не найден.

Обычная процедура обновления npm не работает, потому что npm отсутствует. Поэтому вам необходимо сначала удалить узел, а затем переустановить его:

```
sudo apt-get --purge remove node
sudo apt-get --purge remove nodejs
sudo apt-get autoremove
curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -
sudo apt-get install -y nodejs
node -v
npm -v
```

Теперь у вас обычно должен быть установлен npm 6.x.

Если ранее была установлена другая основная версия Node (не 10.x), пакеты все равно необходимо скомпилировать на узле 10.

```
cd /opt/iobroker
npm rebuild
```