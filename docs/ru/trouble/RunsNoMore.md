---
title: ioBroker больше не работает
lastChanged: 06.06.2019
translatedFrom: de
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/trouble/RunsNoMore.md
hash: UbJALyhZ0lBEJau1MBYfLa578cAArCRtYxl1BBtaDXM=
---
# IoBroker больше не работает
На форуме часто появляется информация о том, что ioBroker больше не работает. Но это утверждение, которое несет столько информации, сколько: моя машина не ездит.

Вы не думаете, что может быть 1000 причин, по которым автомобиль не ездит: нет топлива, нет аккумулятора, спустило колесо и, и, и ...

ioBroker очень модульный, и вы можете легко отремонтировать любую деталь. Файлы конфигурации извлекаются из каталога с пакетами Node.js, и до тех пор, пока этот каталог конфигурации еще не завершен, с установкой ioBroker ничего серьезного не произошло.

Во-первых, вы заметили, что ioBroker не работает, когда «admin» не запущен. Но есть более-менее понятный алгоритм проверки того, что сломано.
Проверьте, работает ли js-контроллер:

** Linux **

````
Linux: ps -A | grep iobroker
````

** Окна: **

Проверьте, находится ли процесс node.exe в проводнике процессов (показать все процессы)

Под Linux что-то должно быть видно:

```
pi@pi:~$ ps -A | grep iobroker
1807 ? 13:59:22 iobroker.js-con
```

Если это не работает, попробуйте ioBroker для начала

** Linux **

```
cd /opt/iobroker
iobroker start
```

или **Windows:**

```
cd C:\ioBroker
iobroker start
```

Если он все еще не запущен или сообщения об ошибках, тогда вы можете попробовать запустить js-контроллер вручную.

```
cd /opt/iobroker
node node_modules/iobroker.js-controller/controller.js --logs
```

Если появляются сообщения об ошибках, вы можете попробовать обновить «js-controller».

Если js-контроллер работает, то должны использоваться TCP-порты 9000 и 9001. Это можно проверить с помощью команды:

```
netstat -n -a -p TCP
```

Следующие строки должны быть видны:

```
TCP 0.0.0.0:9000 0.0.0.0:0 LISTENING
TCP 0.0.0.0:9001 0.0.0.0:0 LISTENING
```

При использовании Redis это должно выглядеть так:

```
TCP 0.0.0.0:6379 0.0.0.0:0 LISTENING
TCP 0.0.0.0:9001 0.0.0.0:0 LISTENING
```

Если ничего не видно (или только одно), то, вероятно, порты других программ заняты. Вы можете изменить порты на */ opt / iobroker / iobroker-data / iobroker.json* Или перенастроить другую программу.

## Переустановите адаптер или контроллер js
Если адаптер или js-контроллер запущен и после обновления больше нет, то скорее всего в обновлении что-то пошло не так. Но вы можете легко установить адаптер снова. Все, что вам нужно сделать, это написать в консоли:

```
cd /opt/iobroker
iobroker stop adapterName
npm install iobroker.adapterName
iobroker upload adapterName
iobroker start adapterName
```

Или для js-контроллера:

```
cd /opt/iobroker
iobroker stop
npm install iobroker.js-controller
iobroker start
```

## Проверьте или правильно установлены node.js и npm
Если js-controller не запущен, возможно, что node.js вообще не установлен.
Рекомендуется использовать версию 8.x файла node.js.

Node.js версии 10.x в основном проверен (по состоянию на 06.05.2019), в 12.x нет никаких гарантий, что он будет работать.

Команды

```
node -v
npm -v
```

должен отображать тот же номер версии. Если это не так, вы должны удалить node.js и переустановить. Или проверьте путь поиска.

Удаление и установка Node.js выполняется так же, как и ручная установка ioBroker (Raspberry и другие системы Linux).

Необходимые шаги подробно описаны ЗДЕСЬ.

И здесь вы можете найти информацию о других системах ..
Проверьте, работает ли адаптер администратора

Сначала посмотрите, активирован ли админ:

```
cd /opt/iobroker
iobroker list instances
```

должна быть такая строка:

```
system.adapter.admin.0 : admin - enabled, port: 8081, bind: 0.0.0.0, run as: admin
```

Если есть «отключен» вместо «включен», вы можете включить адаптеры следующим образом:

```
iobroker start admin
```

Если IP-адрес неправильный, напишите:

```
iobroker set admin.0 --bind 0.0.0.0
```

разрешить на всех IP-адресах.

Вы также можете изменить порт:

```
iobroker set admin.0 --port 8081
```

или отключите SSL:

```
iobroker set admin.0 --ssl false
```

Затем экземпляр должен быть виден в порту (по умолчанию 8081).

с

```
netstat -n -a -p TCP
```

Вы можете проверить, найдена ли строка:

```
TCP 0.0.0.0:8081 0.0.0.0:0 LISTENING
```

Если это все еще не работает, то вы можете запустить вручную и посмотреть, есть ли какие-либо ошибки: cd / opt / iobroker node node_modules / iobroker.admin / admin.js --logs

Это также может быть что-то в журнале. Файл журнала можно найти по адресу ***/ opt / iobroker / log / iobroker.JJJJ-MM-TT.log*** .

Вы можете с командой

```
cd /opt/iobroker
cat log/iobroker.JJJJ-MM-TT.log
```

показать файл. Конечно, ГГГГ-ММ-ДД необходимо заменить на текущую дату. («Кошка» возможна только под Linux)

## Установить другой экземпляр Admin
Если настройки консоли администратора заблокированы и вы не можете получить доступ к странице администратора, все равно есть возможность установить второй экземпляр администратора.

Для этого:

```
iobroker add admin --port 8089
```

бежать.

Вот 8089 порт, который, безусловно, свободен. Затем вы можете связаться с администратором по адресу http:// ip: 8089.

После того, как настройки снова в порядке, вы должны удалить новый (второй на порту 8089) экземпляр для экономии ресурсов.

## Npm исчез
>! В настоящее время что-то подобное происходит в Debian (Raspbian) Buster.

Из-за проблемы с npm может случиться так, что после обновления с Linux, которое обычно также обновляет nodejs в версии скина (6.x, 8.x, 10.x), вдруг ничего не происходит.

Так, например, Адаптеры больше не установлены, сообщение об ошибке: ***npm not found***

В случаях, пожалуйста, проверьте в консоли:

узел -v npm -v

Обычно сейчас (по состоянию на 30 июля 2019 г.) версия узла - 8.15.0, а npm не найден.

Обычная процедура обновления npm не работает, потому что npm там нет. Поэтому вы должны сначала удалить узел, а затем переустановить:

```
sudo apt-get --purge remove node
sudo apt-get --purge remove nodejs
sudo apt-get autoremove
curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -
sudo apt-get install -y nodejs
node -v
npm -v
```

Теперь обычно устанавливается npm 6.x.

Если ранее была установлена другая основная версия (не 10.x) Node, пакеты должны быть скомпилированы на узле 10

```
cd /opt/iobroker
npm rebuild
```