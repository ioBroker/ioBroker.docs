---
title: установка
lastChanged: 13.09.2018
translatedFrom: de
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/install/virtualbox.md
hash: ojdJt/Bd/RzAa+nPIcMrXd0dcayKGusHGKxwmcoeNJY=
---
# Настроить и установить ioBroker в VirtualBox
?> ***Это заполнитель***.<br><br> Помогите ioBroker и дополните эту статью. Пожалуйста, обратите внимание на [Руководство по стилю ioBroker](community/styleguidedoc), чтобы упростить принятие изменений.

@@@ http://www.iobroker.net/docu/?page_id=5358&lang=de @@@

Во-первых, давайте получим последнюю стабильную версию Debian https://www.debian.org/CD/http-ftp/#stable

Чуть ниже под CD нажимаем на AMD64

Теперь качаем «debian-8.4.0-amd64-netinst.iso». Если есть более новая версия, используем ее, на момент скачивания Debian 8.4.0 был актуален.
Я использую Netinst, потому что файл маленький, а установка только перезагружает из сети мелкие вещи.

После этого мы создаем новую виртуальную машину и даем ей имя.
В моем примере ioBroker_Debian_Jessie_x64 Recording87.jpg Затем указываем объем основной памяти, который мы хотим выделить ВМ.
В моем примере 4 ГБ ОЗУ Recording88.jpg

Нажмите «Создать запись на жесткий диск»89.jpg

Выберите VDI (Virtual Image Box) Capture90.jpg

Что касается типа хранилища, выбор зависит от вас.
В моем примере я использую DYNAMIC ALLOCATED Recording91.jpg

Теперь мы можем изменить имя файла ВМ (если захотим) и ввести размер доступного раздела для нашей ВМ, в моем примере 10GB Recording92.jpg

Теперь виртуальная машина настроена.
Если мы сейчас нажмем CHANGE, мы сможем установить еще несколько параметров для виртуальной машины.

Заходим во вкладку MASS STORAGE Нажимаем ПОД Controller: IDE

Логотип компакт-диска появится справа в разделе «Атрибуты».
Мы нажмем на это и выберем «Выбрать ФАЙЛ ДЛЯ ВИРТУАЛЬНОГО носителя CD/DVD».
Теперь мы переходим в проводнике к загруженному ISO-файлу Debian и выбираем его.
Все это должно выглядеть так: Recording93.jpg

Поскольку я хочу получить доступ к ioBroker в своей сети, а не в подсистеме, я выбираю СЕТЕВОЙ МОСТ Recording94.jpg на вкладке СЕТЬ в разделе ПОДКЛЮЧЕНО К

Теперь мы установили все необходимое.
Установка Debian может начаться.
Нажимаем на СТАРТ и попадаем на следующую картинку.
Выбираем INSTALL Recording95.jpg

Язык: Выберите НЕМЕЦКИЙ из Recording96.jpg

Местоположение: выберите ГЕРМАНИЯ из Recording97.jpg

Раскладка клавиатуры: выберите НЕМЕЦКИЙ из Recording98.jpg

Имя компьютера: вводим имя компьютера, который нужно установить.
В моем примере ioBrokerVM (если кто-то хочет воспроизвести резервные копии из своей производственной системы ioBroker в качестве теста, введите то же имя, что и ваш Rasp Pi / Cubie / BananaPi и т. д.) Recording100.jpg

Доменное имя: Поле можно оставить пустым Recording101.jpg

Корневой пароль: Ваш корневой пароль Recording102.jpg

Повторите пароль root: еще раз введите пароль root Recording103.jpg

Создайте пользователя: в моем примере NIPPY Recording104.jpg

Создайте имя пользователя: в моем примере NIPPY Recording105.jpg

Пароль пользователя: Ваш пароль пользователя Recording106.jpg

Повторите пароль пользователя: Ваш пароль пользователя еще раз Recording107.jpg Часовой пояс: Мы выбираем БЕРЛИН

Запись108.jpg

Раздел Диск 1: Выбираем GUIDED - USE FULL DISK Recording109.jpg

Разметка жесткого диска 2: Выбираем наш жесткий диск из Recording110.jpg

Разметка жесткого диска 3: Выбираем ВСЕ ФАЙЛЫ НА ОДНОМ РАЗДЕЛЕ, РЕКОМЕНДУЕТСЯ ДЛЯ НАЧИНАЮЩИХ Recording111.jpg

Разметка жесткого диска 4: Выбираем ЗАВЕРШИТЬ РАЗБИВКУ И ПРИМЕНИТЬ ИЗМЕНЕНИЯ Recording112.jpg

Разбиение жесткого диска 5: Выбираем ДА Recording113.jpg Конфигурация диспетчера пакетов 1: Выбираем ГЕРМАНИЯ Recording115.jpg

Настройка диспетчера пакетов 2: я выбрал ftp.de.debian.org Recording116.jpg

Настройка диспетчера пакетов 3: можно оставить пустым и перейти к ПРОДОЛЖИТЬ Recording118.jpg

Популярный конкурс: Я проголосовал НЕТ Recording119.jpg

Выбор программного обеспечения: Выбираем SSH SERVER & STANDARD SYSTEM TOOLS, остальные снимаем выделение (если выбрано) Recording120.jpg

Загрузчик GRUB 1: выбираем ДА Recording121.jpg

Загрузчик GRUB 2: выбираем наш HDD /dev/sda (ata-Vbox………) Recording122.jpg

Установка завершена: Recording123.jpg

Теперь система перезагружается и мы попадаем в логин

Логин: Recording124.jpg

Мы входим с нашей учетной записью root: Логин: root Пароль: ВАШ ПАРОЛЬ НАЗНАЧЕН Recording125.jpg

Теперь обновляем систему: apt-get install update 1

apt-get установить обновление apt-get установить обновление 1

apt-get установить обновление

Поскольку SUDO не установлен, сделайте так: aptitude install sudo 1

aptitude установить sudo

Установка NPM выполняется следующим образом: apt-get install npm 1

apt-получить установку npm

Затем устанавливаем CURL: apt-get install curl 1

apt-get установить завиток

Подготовьте и установите NodeJs curl -sL https://deb.nodesource.com/setup_4.x | судо -E баш - 1

curl -sL https://deb.nodesource.com/setup_4.x | судо -E баш -

apt-получить установку nodejs 1

apt-получить установку nodejs

Когда это будет сделано, произойдет установка ioBroker.

Сначала мы создаем каталог iobroker: mkdir /opt/iobroker 1

mkdir/opt/iobroker

Переходим в директорию iobroker: cd /opt/iobroker 1

cd /opt/iobroker

Теперь устанавливаем iobroker: npm install --unsafe-perm iobroker 1

npm установить --unsafe-perm iobroker

В конце установки должно появиться следующее: Recording137.jpg

—

Если хотите, можете еще установить htop, я использую его в терминале, чтобы посмотреть использование памяти/загрузку процессора и т.д.

Это устанавливается с помощью: apt-get install htop 1

apt-get установить htop

он запускается с помощью: htop 1

хтоп

И выглядит так: Recording139.jpg

Я надеюсь, что некоторым новичкам было проще настроить виртуальную машину, включая ioBroker.

Установка ioBroker на виртуальную машину у меня часто не удавалась, на BananaPi он работал без проблем.

В любом случае, эта процедура установки отлично сработала для меня на виртуальной машине.

1 Дополнение: 1.1 Автоматический запуск виртуальной машины VirtualBOX (Ubuntu 16.10): 1.2 Настройте 3 переменные! (при необходимости закомментируйте 3-ю переменную или добавьте больше, в зависимости от экземпляров ВМ)

Приложение: автоматически запускать виртуальную машину VirtualBOX (Ubuntu 16.10):

https://www.freesoftwareservers.com/ind … nd-vbox-5/

Создать файл:

sudo nano /etc/init.d/StartVM &amp;&amp; sudo chmod +x /etc/init.d/StartVM &amp;&amp; sudo update-rc.d StartVM по умолчанию 99 01 1

sudo nano /etc/init.d/StartVM &amp;&amp; sudo chmod +x /etc/init.d/StartVM &amp;&amp; sudo update-rc.d StartVM по умолчанию 99 01

Содержимое файла:

```
#! /bin/sh
# Start VirtualBox @boot
# /etc/init.d/StartVM
#

#Edit these variables!
VMUSER=user
VMNAME=VM1
VMNAME2=Test

case "$1" in
  start)
    echo "Starting VirtualBox VM ..."
    sudo -u $VMUSER VBoxHeadless --startvm $VMNAME &amp;
    sudo -u $VMUSER VBoxHeadless --startvm $VMNAME2 &amp;
    ;;
  stop)
    echo "Saving state of Virtualbox VM ..."
    sudo -u $VMUSER VBoxManage controlvm $VMNAME savestate
    sudo -u $VMUSER VBoxManage controlvm $VMNAME2 savestate
    ;;
  *)
    echo "Usage: /etc/init.d/StartVM {start|stop}"
    exit 1
    ;;
esac

exit 0
```

Настройте 3 переменные! (при необходимости закомментируйте 3-ю переменную или добавьте больше, в зависимости от экземпляров ВМ)

Установите в BIOS (при работе на компьютере), чтобы в случае сбоя питания восстанавливалось старое состояние ВКЛ/ВЫКЛ. В случае сбоя питания он перезапускается, и виртуальная машина также запускается.

Создавайте резервные копии с помощью VirtualBOX и Back in Time

В VirtualBOX вы можете легко создавать точки сохранения вручную. Это займет всего несколько секунд и 1 клик. Всегда делайте это перед обновлением iobroker или изменением скрипта! Скриншот от 26-04-2016 22-48-04.png

Вы можете восстановить предыдущую версию одним щелчком мыши.

Потребление памяти: динамическая ВМ с 10 ГБ и Ubuntu 16.10 Full + iobroker занимает около 1,7 ГБ памяти. Мои 11 снимков занимают 8,6 ГБ.

Я автоматически копирую всю свою личную область, включая каталог ВМ VirtualBOX, на второй жесткий диск каждую ночь с помощью программы «Back in Time». Несколько версий хранятся там и автоматически удаляются через определенный промежуток времени.
Скриншот от 26-04-2016 22-55-23.png На нем работает VirtualBox.

```
sudo apt-get install virtualbox virtualbox-qt virtualbox-dkms
```

Вы также можете установить пакет расширений, он также поддерживает, например, подключение устройств USB 2.0 или 3.0 от хоста к клиенту, сквозное подключение веб-камеры от хоста к клиенту и шифрование AES. Вы можете скачать его [URL:https://www.virtualbox.org/wiki/Downloads]здесь — пункт 2 (расширение)[/url] Загрузите этот файл и откройте его либо от имени администратора, либо откройте и установите его через VirtualBOX/ Глобальные настройки/дополнительные пакеты (но запустите VirtualBOX от имени администратора).

Минимальные аппаратные требования очень низкие. Вы должны выяснить, как это подходит. Теоретически достаточно 512 ОЗУ и старенького интеловского процессора. Например, он должен работать без сбоев на всех поколениях Intel NUC.
Для непрерывной работы конечно важно иметь энергосберегающий хост. В наши дни вы можете легко возиться с мощными компьютерами мощностью менее 10 Вт. В Интернете есть различные руководства по 10-ваттным ПК. Важно, чтобы вы по возможности обходились без своей (собственной) видеокарты и имели блок питания, эффективный в нижнем диапазоне нагрузки, а не использовали материнскую плату высокого класса, потому что чем больше у нее функций, тем больше чипов отстой. у власти.
Я действительно могу порекомендовать серию Intel NUC для Windows или Ubuntu. Процитирую свою подпись: iobroker в Ubuntu VM с VirtualBOX на Intel NUC NUC6i3SYH (i3 Skylake), M.2 SSD, 8 ГБ RAM, Ubuntu 16.10. 6-8 Вт в режиме ожидания.

В Virtualbox я установил сетевую карту виртуальной машины на «Мост», т.е. виртуальная машина подключена к маршрутизатору локальной сети, так сказать, как отдельный компьютер.

А фиксированный IP вполне нормально задается внутри ВМ через установленную операционную систему.
В Debian это может работать следующим образом:

Терминал:

```
sudo nano /etc/network/interfaces
```

Может быть что-то вроде этого:

```
  auto eth0
    allow-hotplug eth0
    iface eth0 inet dhcp
```

Вы меняете это на (внимание, адаптируйте числа к своей среде)

```
 auto eth0
    iface eth0 inet static
        address 192.168.1.7
        netmask 255.255.255.0
        gateway 192.168.1.1
```

Где eth0 — это имя вашего собственного устройства локальной сети, оно, вероятно, будет называться по-другому в виртуальной машине, при изменении вам нужно будет заменить два слова eth0 на правильные имена.