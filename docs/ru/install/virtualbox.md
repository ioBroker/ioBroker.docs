---
title: установка
lastChanged: 13.09.2018
translatedFrom: de
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/install/virtualbox.md
hash: zoJH4HPQb5fjZZk7ln+yhEsqRR9r5z/9T/Z6NfOncwk=
---
# Настройка и установка ioBroker в VirtualBox
@@@ http://www.iobroker.net/docu/?page_id=5358&lang=de @@@

Сначала мы получаем текущую стабильную версию Debian https://www.debian.org/CD/http-ftp/#stable.

Чуть ниже нажимаем AMD64 под CD.

Теперь мы загружаем `debian-8.4.0-amd64-netinst.iso`. Если есть более новая версия, используйте ее: на момент загрузки была актуальная версия Debian 8.4.0.
Я использую `Netinst`, потому что файл небольшой, и установка перезагружает из сети только мелочи.

Затем мы создаем новую виртуальную машину и даем ей имя.
В моем примере ioBroker_Debian_Jessie_x64 Rekord87.jpg Затем укажите размер основной памяти, которую мы хотим выделить виртуальной машине.
В моем примере 4 ГБ ОЗУ Record88.jpg

Нажмите «Создать диск» Recording89.jpg.

Выберите VDI (окно виртуального изображения) Recording90.jpg

Когда дело доходит до типа хранилища, каждый сам выбирает, что ему выбрать.
В моем примере я использую DYNAMIC ALLOCATED Recording91.jpg.

Теперь мы можем изменить имя файла ВМ (при желании) и указать размер доступного для нашей ВМ раздела. В моем примере 10 ГБ Record92.jpg.

Теперь виртуальная машина готова.
Если мы теперь нажмем «ИЗМЕНИТЬ», мы сможем настроить еще несколько параметров виртуальной машины.

Переходим на вкладку MASS STORAGE. Нажимаем ПОД Контроллер: IDE.

Логотип компакт-диска появится справа в разделе «Атрибуты».
Нажимаем на это и выбираем ФАЙЛ ДЛЯ ВИРТУАЛЬНОГО носителя CD/DVD.
Теперь давайте перейдем к загруженному ISO-файлу Debian в проводнике и выберем его.
Тогда все это должно выглядеть так: Recording93.jpg

Поскольку я хочу подключиться к ioBroker в своей сети, а не в подчиненной, я установил выбор СЕТЕВОЙ МОСТ Recording94.jpg на вкладке СЕТЬ в разделе ПОДКЛЮЧЕНО.

Теперь мы установили все необходимое.
Можно начать установку Debian.
Нажимаем СТАРТ и попадаем на следующее изображение.
Выбираем УСТАНОВИТЬ запись95.jpg

Язык: выберите НЕМЕЦКИЙ из Recording96.jpg.

Местоположение: выберите ГЕРМАНИЯ из Recording97.jpg.

Раскладка клавиатуры: выберите НЕМЕЦКИЙ из Recording98.jpg.

Имя компьютера: Вводим имя компьютера, который будет установлен.
В моем примере ioBrokerVM (если кто-то хочет восстановить резервные копии из своей продуктивной системы ioBroker в качестве теста, введите здесь то же имя, что и у вашего RasPi / Cubie / BananaPi и т. д.) Recording100.jpg

Доменное имя: Вы можете оставить это поле пустым. Recording101.jpg

Пароль root: Ваш пароль root Recording102.jpg

Повторите пароль root: Повторите пароль root Recording103.jpg

Создать пользователя: В моем примере NIPPY Record104.jpg

Создайте имя пользователя: В моем примере NIPPY Record105.jpg

Пароль для пользователя: Ваш пароль пользователя Recording106.jpg

Повторите пароль пользователя: Ваш пароль пользователя еще раз Recording107.jpg Часовой пояс: Мы выбираем БЕРЛИН

Запись108.jpg

Разбиение жесткого диска 1: мы выбираем РУКОВОДСТВО – ИСПОЛЬЗОВАТЬ ПОЛНУЮ ЗАПИСЬ ДИСКА109.jpg

Разметка жесткого диска 2: Выбираем наш жесткий диск из Recording110.jpg.

Раздел жесткого диска 3: Выбираем ВСЕ ФАЙЛЫ НА ОДНОМ РАЗДЕЛЕ, РЕКОМЕНДУЕТСЯ ДЛЯ НАЧИНАЮЩИХ Recording111.jpg

Разбиение жесткого диска 4: Выбираем ОСТАНОВИТЬ РАЗДЕЛЕНИЕ И ПРИМЕНИТЬ ИЗМЕНЕНИЯ Recording112.jpg

Разметка жесткого диска 5: Выбираем ДА Recording113.jpg Менеджер пакетов Настройка 1: Выбираем ГЕРМАНИЯ Recording115.jpg

Настройка диспетчера пакетов 2: я выбрал ftp.de.debian.org Recording116.jpg

Менеджер пакетов Настройка 3: вы можете оставить это поле пустым и перейти к ПРОДОЛЖИТЬ Recording118.jpg

Конкурс популярности: я выбрал NO Recording119.jpg

Выбор программного обеспечения: мы выбираем SSH SERVER & STANDARD SYSTEM Tools и снимаем выделение с остальных (если они выбраны) Recording120.jpg

Загрузчик GRUB 1: выбираем ДА Recording121.jpg

Загрузчик GRUB 2: выбираем наш HDD /dev/sda (ata-Vbox………) Record122.jpg

Установка завершена: Recording123.jpg

Теперь система перезагружается и мы попадаем в логин

Логин: Recording124.jpg

Мы входим в систему под нашей учетной записью root: Логин: root Пароль: ВАШ ДАННЫЙ ПАРОЛЬ Recording125.jpg

Теперь обновим систему: apt-get install update 1

apt-get установить обновление apt-get установить обновление 1

apt-get установить обновление

Поскольку SUDO не установлен, сделайте следующее: aptitude install sudo 1

установка aptitude sudo

Установка NPM выполняется следующим образом: apt-get install npm 1.

apt-get установить npm

Затем устанавливаем CURL: apt-get install curl 1

apt-get установить локон

Подготовка и установка NodeJs curl -sL https://deb.nodesource.com/setup_4.x | судо -E Баш - 1

локон -sL https://deb.nodesource.com/setup_4.x | судо -E баш -

apt-get установить nodejs 1

apt-get установить nodejs

Как только это будет сделано, ioBroker будет установлен.

Сначала мы создаем каталог iobroker: mkdir /opt/iobroker 1.

mkdir /opt/iobroker

Переходим в каталог iobroker: cd /opt/iobroker 1.

компакт-диск /opt/iobroker

Теперь давайте установим iobroker: npm install --unsafe-perm iobroker 1

npm install --unsafe-perm iobroker

В конце установки должно появиться следующее: Recording137.jpg

—

Если хотите, вы можете установить htop. Я использую его в терминале, чтобы посмотреть использование памяти/загрузку процессора и т. д.

Это устанавливается с помощью: apt-get install htop 1

apt-get установить htop

Он выполняется с помощью: htop 1

хтоп

А выглядит вот так: Recording139.jpg

Я надеюсь, что некоторым новичкам стало проще настроить виртуальную машину, включая ioBroker.

У меня установка ioBroker на ВМ часто не удавалась, но на BananaPi все запускалось без проблем.

В любом случае, эта процедура установки прекрасно сработала на виртуальной машине.

1 Дополнение: 1.1 Автоматический запуск VirtualBOX VM (Ubuntu 16.10): 1.2 Настройте 3 переменные! (при необходимости закомментируйте третью переменную или добавьте еще, в зависимости от экземпляров ВМ)

Дополнение: автоматический запуск виртуальной машины VirtualBOX (Ubuntu 16.10):

https://www.freesoftwareservers.com/ind…nd-vbox-5/

Создать файл:

sudo nano /etc/init.d/StartVM &amp;&amp; sudo chmod +x /etc/init.d/StartVM &amp;&amp; sudo update-rc.d StartVM по умолчанию 99 01 1

sudo nano /etc/init.d/StartVM &amp;&amp; sudo chmod +x /etc/init.d/StartVM &amp;&amp; sudo update-rc.d StartVM по умолчанию 99 01

Содержимое файла:

```
#! /bin/sh
# Start VirtualBox @boot
# /etc/init.d/StartVM
#

#Edit these variables!
VMUSER=user
VMNAME=VM1
VMNAME2=Test

case "$1" in
  start)
    echo "Starting VirtualBox VM ..."
    sudo -u $VMUSER VBoxHeadless --startvm $VMNAME &amp;
    sudo -u $VMUSER VBoxHeadless --startvm $VMNAME2 &amp;
    ;;
  stop)
    echo "Saving state of Virtualbox VM ..."
    sudo -u $VMUSER VBoxManage controlvm $VMNAME savestate
    sudo -u $VMUSER VBoxManage controlvm $VMNAME2 savestate
    ;;
  *)
    echo "Usage: /etc/init.d/StartVM {start|stop}"
    exit 1
    ;;
esac

exit 0
```

Отрегулируйте 3 переменные! (при необходимости закомментируйте третью переменную или добавьте еще, в зависимости от экземпляров ВМ)

Установите в BIOS (если он запущен на компьютере), чтобы в случае сбоя питания восстанавливалось старое состояние ВКЛ/ВЫКЛ. В случае сбоя питания он перезапускается, а затем также запускается виртуальная машина.

Создавайте резервные копии с помощью VirtualBOX и Back in Time

В VirtualBOX вы можете легко создавать точки сохранения вручную. Это займет всего несколько секунд и 1 клик. Всегда делайте это перед обновлением iobroker или изменением скрипта! Скриншот от 26 апреля 2016 г. 22-48-04.png

Восстановить предыдущую версию можно одним щелчком мыши.

Потребление памяти: динамическая ВМ с 10 ГБ и Ubuntu 16.10 Full + iobroker занимает около 1,7 ГБ памяти. Мои 11 снимков занимают 8,6 ГБ.

Я автоматически копирую всю свою личную область, включая каталог виртуальной машины VirtualBOX, на второй жесткий диск каждую ночь с помощью программы «Назад во времени». Там хранятся несколько версий, которые автоматически удаляются через определенное время.
Снимок экрана от 26 апреля 2016 г., 22-55-23.png. Запускается VirtualBox.

```
sudo apt-get install virtualbox virtualbox-qt virtualbox-dkms
```

Вы также можете установить пакет расширений; он также поддерживает, например, подключение устройств USB 2.0 или 3.0 от хоста к клиенту, сквозную передачу веб-камеры от хоста к клиенту и шифрование AES. Скачать его можно [URL:https://www.virtualbox.org/wiki/Downloads]здесь — 2-й пункт (Extension Pack)[/url] Скачиваете этот файл и открываете его либо от имени администратора, либо открываете и устанавливаете через VirtualBOX/Глобальные настройки/Дополнительные пакеты (но запускайте VirtualBOX от имени администратора).

Минимальные требования к оборудованию очень низкие. Вы должны сами понять, насколько это подходит. Теоретически достаточно 512 ОЗУ и старенького процессора Intel. Например, он должен бесперебойно работать на всех поколениях Intel NUC.
Для непрерывной работы, конечно, важно иметь энергосберегающий хост. Сегодня можно легко собрать мощные компьютеры мощностью менее 10 Вт. В Интернете есть различные инструкции для ПК на 10 Вт. Важно по возможности избегать использования собственной видеокарты и иметь блок питания, эффективный в диапазоне низкой нагрузки, а также не использовать материнскую плату высокого класса, потому что чем больше функций она имеет, тем больше чипов потребляют энергию. власть.
Я действительно могу порекомендовать серию Intel NUC для Windows или Ubuntu. Цитирую свою подпись: iobroker в виртуальной машине Ubuntu с VirtualBOX на Intel NUC NUC6i3SYH (i3 Skylake), SSD M.2, 8 ГБ ОЗУ, Ubuntu 16.10. 6-8 Вт в простое.

В Virtualbox я установил для сетевой карты виртуальной машины режим «Мост», что означает, что виртуальная машина висит на маршрутизаторе локальной сети, как собственный компьютер.

Фиксированный IP-адрес устанавливается как обычно внутри виртуальной машины через установленную операционную систему.
В Debian это может работать следующим образом:

Терминал:

```
sudo nano /etc/network/interfaces
```

Там может быть что-то вроде этого:

```
  auto eth0
    allow-hotplug eth0
    iface eth0 inet dhcp
```

Вы меняете это на (будьте осторожны, адаптируйте цифры к своей среде)

```
 auto eth0
    iface eth0 inet static
        address 192.168.1.7
        netmask 255.255.255.0
        gateway 192.168.1.1
```

Если eth0 — это имя вашего собственного устройства локальной сети, то в виртуальной машине оно, вероятно, будет называться по-другому, при изменении вам придется заменить два слова eth0 правильными именами.