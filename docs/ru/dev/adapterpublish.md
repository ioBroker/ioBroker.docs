---
title: Публиковать
lastChanged: 21.01.2020
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/dev/adapterpublish.md
translatedFrom: de
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
hash: G9Qg1a+J3PRWRwDWflz0rxRNU5K80XmOyeE6fJZlKLI=
---
# Публикация адаптера
Прежде чем рассматривать возможность публикации адаптера, его следует предложить для тестирования в [Тестовая ветка форума](https://forum.iobroker.net/category/91/tester).
Если тесты пройдены успешно и адаптер работает стабильно, его следует на данный момент добавить в последний репозиторий.

Если адаптер стабильно работает с определенным номером версии, вы можете перенести его в стабильный репозиторий. Для этого требуется собственная оценка разработчика в сочетании с отзывами пользователей.

***Более актуальные требования можно найти здесь:*** https://github.com/ioBroker/ioBroker.repositories/blob/master/README.md.

## Последние требования к репозиторию
0. Используйте [https://adapter-check.iobroker.in/](https://adapter-check.iobroker.in/), чтобы протестировать репозиторий адаптера.

1. Репозиторий GitHub адаптера должен иметь заглавную букву B в ioBroker, а в package.json он должен быть строчным, поскольку ``npm`` не допускает использования прописных букв.

2. Заголовок в io-package.json не должен содержать слово ``ioBroker`` или слово ``Адаптер``.

3. Атрибут title в io-package.json (common) — это краткое имя адаптера на английском языке. В то время как ``titleLang`` содержит переводы атрибута ``title``. (расширение Lang означает языки)

4. Адаптер должен содержать инструкции в виде файла README.md. По крайней мере, это должно быть доступно на английском языке. Другие языки также приветствуются. Этот [пример](https://github.com/foxriver76/ioBroker.denon) может служить предложением.

5. Для адаптера требуется лицензия. Как в io-package.json, так и в отдельном [файле](https://github.com/foxriver76/ioBroker.denon/blob/master/LICENSE) в репозитории Github.

   Пример для io-package.json:

```json
{
  "common": {
      "license": "MIT"
  }
}
```

6. Каталог «www» и каталог «widget» следует удалить, если они не используются.

7. В io-package.json атрибут `type` должен быть создан в разделе common. Для этого из этого [списка](#категории адаптеров) следует указать наиболее подходящую категорию.

8. В io-package.json атрибуты ConnectionType и dataSource должны быть созданы в разделе common. Для этого из этого [списка](#Тип подключения адаптера) следует указать наиболее подходящую категорию подключения.

9. Состояния, созданные адаптером, должны иметь действительную информацию об их [ролях](https://github.com/ioBroker/ioBroker/blob/master/doc/STATE_ROLES.md#state-roles) `ролях` в разделе common .

Следует избегать использования роли `state`.

10. Адаптер должен использовать тестирование, указанное в шаблоне. Для этого учетную запись Github можно связать с Appveyor (тесты Windows) и Travis CI (тесты Linux и Mac OS), а соответствующий репозиторий можно зарегистрировать для тестирования.

Эти два инструмента непрерывной интеграции оказались подходящими для проекта ioBroker и бесплатны для общедоступных репозиториев Github.

Разработчик приветствует расширение сферы тестирования.

11. В io-package.json должна быть сделана хотя бы одна запись под общим для атрибута `authors`.

Атрибут `author` также должен быть указан в package.json.
При желании для npm также можно сохранить несколько авторов, используя атрибут `contributors` в package.json.

12. Адаптер должен быть доступен в виде пакета npm. Дополнительную информацию можно найти [здесь](https://github.com/ioBroker/ioBroker.repositories#how-to-publish-on-npm).

13. Организацию ioBroker необходимо добавить в npm. Это необходимо для обеспечения долгосрочного обслуживания пакета, даже если разработчик больше не может поддерживать пакет по причине времени или по другим причинам.

Дополнительную информацию можно найти [здесь](https://github.com/ioBroker/ioBroker.repositories#add-owner-to-packet).

## Требования к стабильному репозиторию
1. Адаптер был успешно добавлен в последний репозиторий.
2. Для адаптера существует [Тестовая тема форума](https://forum.iobroker.net/viewforum.php?f=36), в которой уже были даны отзывы пользователей.
3. Должна быть реализована функция обнаружения. Это функция [адаптера Discovery](https://github.com/ioBroker/ioBroker.discovery).

для автоматического определения того, может ли пользователь использовать экземпляр адаптера.
Для этого необходимо сделать запрос на включение в репозиторий [Адаптеры обнаружения](https://github.com/ioBroker/ioBroker.discovery).

## Добавляем адаптер в официальный репозиторий
1. Необходимо посетить [официальный репозиторий Github](https://github.com/ioBroker/ioBroker.repositories) и сделать запрос на извлечение со следующим содержимым, в зависимости от репозитория.

2. Расположите адаптер правильно в алфавитном порядке между существующими адаптерами.

3. Номер версии должен быть объявлен при включении в стабильный репозиторий. Его необходимо обновлять по мере дальнейшего развития адаптера.

4. Адаптер должен установить атрибут списка docs в io-package.json, указывающий, где можно найти инструкции на соответствующем языке.

В качестве ключа указывается язык, а в качестве значения — путь к файлу Markdown.
Инструкции на английском языке обязательны (в случае чрезвычайной ситуации можно обратиться к стандартному README). Немецкие инструкции также желательны, поскольку большинство пользователей говорят по-немецки, но это необязательно.
Подробные инструкции могут сэкономить разработчику много времени на форуме.
Пример можно найти [здесь](https://github.com/foxriver76/ioBroker.denon/blob/master/docs/de/README.md).

   Пример:

```json
{
  "common": {
     "docs": {
         "de": "docs/de/README.md"
     }
  }
}
```

### Последний
Файл `sources-dist.json` необходимо отредактировать:

Пример:

```json
  "admin": {
    "meta": "https://raw.githubusercontent.com/ioBroker/ioBroker.admin/master/io-package.json",
    "icon": "https://raw.githubusercontent.com/ioBroker/ioBroker.admin/master/admin/admin.png",
    "published": "2017-04-10T17:10:21.690Z",
    "type": "general"
  }
```

Дата `published` представляет собой дату первоначальной публикации и не должна быть изменена.

### Стабильный
Файл `sources-dist-stable.json` необходимо отредактировать:

Пример:

```json
  "admin": {
    "meta": "https://raw.githubusercontent.com/ioBroker/ioBroker.admin/master/io-package.json",
    "icon": "https://raw.githubusercontent.com/ioBroker/ioBroker.admin/master/admin/admin.png",
    "version": "2.0.7",
    "published": "2017-04-10T17:10:21.690Z",
    "type": "general"
  }
```

Дата `published` представляет собой дату первоначальной публикации и не должна быть изменена.

## Управление версиями адаптера
Текущий номер версии адаптера указан как в io-package.json, так и в package.json.
Эти две части информации должны совпадать. Номер версии разделен на три части двумя точками.

```json
"version": "1.7.6"
```

Первая часть (слева направо) представляет собой `Major Part`, вторая часть представляет часть `minor`, а последняя часть представляет часть `micro`.
Номера версий следует увеличить в соответствии со следующим списком:

- **микро**: исправлены только ошибки.
- **minor**: функции были добавлены, но версия совместима с предыдущими версиями.
- **major**: серьезные изменения, которые больше не обеспечивают обратную совместимость со старой версией.

Атрибут `news` также следует сохранить в io-package.json.
Это позволяет пользователям устанавливать любую указанную версию (при условии, что она опубликована на npm) через интерфейс администратора.
Здесь должен храниться номер версии и изменения.
Изменения могут быть задокументированы на любом поддерживаемом языке и должны быть задокументированы как минимум на английском языке.

Пример:

```json
"news": {
    "1.7.6": {
        "en": "Configuration dialog was corrected",
        "de": "Konfigurationsdialog wurde korrigiert",
        "ru": "Диалог конфигурации был исправлен",
        "pt": "A caixa de diálogo de configuração foi corrigida",
        "nl": "Configuratiedialoog is gecorrigeerd",
        "fr": "La boîte de dialogue de configuration a été corrigée",
        "it": "La finestra di configurazione è stata corretta",
        "es": "Se corrigió el diálogo de configuración",
        "pl": "Okno dialogowe konfiguracji zostało poprawione"
    },
    "1.7.5": {
        "en": "The roles were tuned",
        "de": "Die Rollen waren abgestimmt",
        "ru": "Роли были настроены",
        "pt": "Os papéis foram afinados",
        "nl": "De rollen zijn afgestemd",
        "fr": "Les rôles ont été réglés",
        "it": "I ruoli erano sintonizzati",
        "es": "Los roles fueron sintonizados",
        "pl": "Role zostały dostrojone"
    }
}
```

## Категории адаптеров
- `сигнализация` - системы безопасности
- `климат-контроль` - системы кондиционирования, воздушные фильтры, обогреватели и многое другое.
- `коммуникация` - предоставление данных для других адаптеров, например. Б. через REST
- `дата и время` - например. Б. Календарь
- «Энергия» - мониторинг мощности, солнечные системы, инверторы и многое другое.
- «измерение» - Другие измерительные системы (например, вода, газ, нефть)
- 'сад' - например. Например, газонокосилки, спринклерные системы.
- `general` — общие адаптеры, такие как Admin, Web, Discovery.
- `геопозиция` - геолокация объектов или людей
- «Аппаратное обеспечение» — различное многофункциональное оборудование, такое как Arduino, ESP, Bluetooth, ...
- "здоровье" - кровяное давление, сердцебиение, масса тела,...
- "бытовые" - кухонная техника, пылесосы и т.п.
- `инфраструктура` - сеть, NAS, принтеры, телефоны.
- `iot-systems` - Другие системы умного дома (аппаратное и программное обеспечение)
- `освещение` - освещение
- `логика` — правила, скрипты, парсеры и т.д.
- `messaging` - Адаптер для отправки и получения сообщений, например. Например, по электронной почте, Telegram,...
- `misc-data` - экспорт и импорт данных, конвертер валют и т.д.
- `мультимедиа` - ТВ, AVR, приставки, голосовые помощники и т.д.
- `сеть` - Ping, обнаружение сети, UPnP, ...
- `протоколы` - протоколы связи, например. Например, MQTT
- `хранилище` - регистрация, хранение данных, например. Б. реляционные базы данных, ...
- `утилита` - Поддержка адаптеров, таких как: Б.Резервное копирование
- `транспортное средство` - автомобили
- `визуализация` - адаптер визуализации, типа vis и т.д.
- `visualization-icons` — Иконки для визуализаций.
- `визуализация-виджеты` - iobroker.vis Виджеты
- `погода` — информация о погоде, качестве воздуха, информация об окружающей среде.

## Тип подключения адаптера
Определите `connectionType` в части `common` `io-package.json` как:

— «локальный» — обеспечивает прямую связь с устройством или концентратором.
- «облако» — интеграция этого устройства осуществляется через облако и требует активного подключения к Интернету.

Определите `dataSource` в `common` как:

- `poll` — статус опроса означает, что обновление может быть замечено позже.
- `push` — ioBroker будет уведомлен, когда станет доступен новый статус.
- `предположение` - Невозможно определить статус устройства. ioBroker принимает статус на основе последней команды ioBroker.