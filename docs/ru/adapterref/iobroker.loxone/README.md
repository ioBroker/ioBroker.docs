---
translatedFrom: en
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/adapterref/iobroker.loxone/README.md
title: ioBroker.loxone
hash: YkjvNYRdWtmjOVjVA795TpNxsCDUbmN6c3+fCVavieY=
---
![Логотип](../../../en/adapterref/iobroker.loxone/admin/loxone.png)

![Версия NPM](https://img.shields.io/npm/v/iobroker.loxone.svg)
![Загрузки](https://img.shields.io/npm/dm/iobroker.loxone.svg)
![Количество установок](https://iobroker.live/badges/loxone-installed.svg)
![Текущая версия находится в стабильном репозитории.](https://iobroker.live/badges/loxone-stable.svg)
![НПМ](https://nodei.co/npm/iobroker.loxone.png?downloads=true)

# IoBroker.loxone
[![[Статус перевода](https://weblate.iobroker.net/widgets/adapters/-/loxone/svg-badge.svg)](https://weblate.iobroker.net/engage/adapters/?utm_source=widget)

**Тесты:** ![Тестирование и выпуск](https://github.com/UncleSamSwiss/ioBroker.loxone/workflows/Test%20and%20Release/badge.svg)

## Адаптер Loxone для ioBroker
**Для работы этого адаптера требуется как минимум Node.js версии 20.x!_**

Получает всю доступную информацию из Loxone Miniserver (и Loxone Miniserver Go) и отображает изменения в режиме реального времени.

**Этот адаптер использует библиотеки Sentry для автоматического сообщения разработчикам об исключениях и ошибках в коде.** Для получения более подробной информации и сведений о том, как отключить отправку сообщений об ошибках, см. [Документация по плагину Sentry](https://github.com/ioBroker/plugin-sentry#plugin-sentry)! Отправка сообщений Sentry используется начиная с js-controller 3.0.

## Установить
Установите этот адаптер через административную панель ioBroker:

1. Откройте диалоговое окно конфигурации экземпляра.
2. Введите IP-адрес или имя хоста и HTTP-порт (по умолчанию 80) вашего мини-сервера Loxone.
3. Создайте нового пользователя на мини-сервере Loxone (используя приложение Loxone Config), которому предоставьте только права на чтение и запись всех необходимых переменных.
4. Введите имя пользователя и его пароль в диалоговом окне настроек.
5. Сохраните конфигурацию.
6. Запустите адаптер.

## Конфигурация
### Имя хоста / IP-адрес мини-сервера
Это IP-адрес или имя хоста вашего Loxone Miniserver или Miniserver Go.

### Порт мини-сервера
Это HTTP-порт вашего мини-сервера Loxone.

По умолчанию Miniserver настроен на прослушивание порта 80, но вы могли изменить это значение.

### Имя пользователя мини-сервера
Для доступа к мини-серверу Loxone необходимо указать действительное имя пользователя.

В целях безопасности настоятельно рекомендуется использовать учетную запись, отличную от "admin".

Пользователю нужен только доступ на чтение к тем переменным, которые вы хотите использовать из ioBroker.

### Пароль мини-сервера
Укажите пароль для указанного имени пользователя (см. выше).

### Синхронизация имен
Это позволит обновлять имена в ioBroker всякий раз, когда они изменяются в конфигурации Loxone.
Если эта функция отключена, имена будут синхронизироваться только при первом обнаружении элемента управления.

### Синхронизация комнат
Это заполнит перечисление enum.rooms всеми комнатами, предоставленными мини-сервером Loxone, и свяжет все элементы управления.

### Синхронизация функций
Это заполнит перечисление enum.functions всеми категориями, предоставленными мини-сервером Loxone, и свяжет все элементы управления.

### Сервер погоды
Выберите, какие данные о погоде вы хотите синхронизировать:

— Параметр «Не синхронизировать данные о погоде» не будет синхронизировать ничего, связанного с сервером погоды.
— Функция «Синхронизировать только текущую погоду» синхронизирует данные в разделе «Фактические данные».
— Функция «Синхронизировать прогноз погоды на 24 часа» синхронизирует текущую погоду и прогноз погоды на 24 часа.
— Функция «Синхронизировать весь прогноз погоды» синхронизирует текущую погоду и весь прогноз погоды (на 96 часов).

## Штаты
Адаптер автоматически подключается к настроенному мини-серверу Loxone и создает состояния для каждого обнаруженного состояния управления.

Идентификаторы штатов имеют следующий формат: `loxone.<instance>.<control>.<state>`

- `<instance>` — это индекс экземпляра адаптера ioBroker (обычно "0")
- `<control>` — это UUID элемента управления.
- `<state>` — это состояние элемента управления (см. [Поддерживаемые типы элементов управления](#supported-control-types) для получения дополнительной информации).

Имя, указанное при настройке элемента управления в Loxone Config, будет использоваться в качестве его отображаемого имени только в ioBroker.
Это связано с тем, что пользователь может выбрать одно и то же имя для нескольких элементов управления.

Для получения более подробной информации об элементах управления и их состояниях, пожалуйста, также ознакомьтесь с API Loxone (особенно со структурным файлом): https://www.loxone.com/enen/kb/api/

## Контроль видимости
По умолчанию Loxone Miniserver скрывает многие элементы управления (и, следовательно, их состояния) от веб-интерфейса.

Это означает, что они также скрыты от этого адаптера ioBroker.

### Использование в пользовательском интерфейсе
Чтобы убедиться, что все ваши состояния корректно передаются в ioBroker, проверьте, отмечен ли для них пункт «Использовать» в разделе «Пользовательский интерфейс»:

![Использовать в настройках пользовательского интерфейса](../../../en/adapterref/iobroker.loxone/doc/loxone-config-use-in-visualization.png)

### Отображение диагностических входов
Чтобы просмотреть диагностические данные (например, состояние батареи устройств Air), убедитесь, что для данного устройства включена опция «Отображать диагностические данные»:

![Отображение настроек диагностических входов](../../../en/adapterref/iobroker.loxone/doc/loxone-config-display-diagnostics.png)

## Глобальные государства
В настоящее время данный адаптер предоставляет следующие глобальные состояния:

- `operatingMode`: текущий номер режима работы мини-сервера Loxone.
- `operatingMode-text`: текущий режим работы мини-сервера Loxone в текстовом формате.
- «Восход солнца»: количество минут после полуночи, через которое сегодня восходит солнце.
- `закат`: количество минут после полуночи, когда сегодня заходит солнце.
- `notifications`: количество уведомлений
- `modifications`: количество модификаций
- все остальные глобальные состояния просто представлены в виде текстов.

## Поддерживаемые типы элементов управления
В настоящее время данный адаптер поддерживает следующие типы элементов управления.

За названием штата можно увидеть его тип:

- `(rw)`: доступно для чтения и записи: это состояние можно изменить в ioBroker.
- `(ro)`: только для чтения: это состояние нельзя изменить через ioBroker
- `(wo)`: только для записи: значение этого состояния не сообщается данным адаптером, но его можно изменить, что вызовет определенные действия на мини-сервере Loxone.

### AalSmartAlarm
Предоставляется системой управления интеллектуальной сигнализацией AAL.

- `alarmLevel` (ro) ID текущего уровня тревоги
- 0 = Нет тревоги
- 1 = Немедленная тревога
- 2 = Отложенный сигнал тревоги
- `alarmCause` (ro) Строка, представляющая последнюю причину срабатывания сигнализации
- `isLocked` (ro) Сброс активен, входные данные будут игнорироваться, поэтому никакие сигналы тревоги выполняться не будут.
- `isLeaveActive` (ro) Если входной параметр «Отпуск» установлен, никакие оповещения выполняться не будут.
- `disableEndTime` (ro) Время окончания действия элемента управления, который необходимо отключить
- `подтвердить` (wo) Подтвердить ожидающий сигнал тревоги
- `disable` (wo) Отключает управление на определенный период времени, сигналы тревоги выполняться не будут. Установка значения 0 повторно включит интеллектуальную сигнализацию.
- `startDrill` (wo) Выполнить тестовый сигнал тревоги

### AalEmergency
Обеспечивается управлением с помощью интеллектуальной кнопки экстренного вызова AAL.

- `status` (ro) идентификатор текущего статуса
- 0 = работает, нормальный режим работы, ожидание нажатия кнопки аварийной остановки
- 1 = сработала сигнализация
- 2 = вход сброса в конфигурации активирован, управление отключено
- 3 = приложение временно отключило управление
- `disableEndTime` (ro) Время окончания действия элемента управления, который необходимо отключить
- Текстовое состояние `resetActive` (ro) с активным входом сброса (если элемент управления находится в состоянии сброса)
- `trigger` (wo) запустить будильник из приложения
- `quit` (wo) — завершить работу активного будильника
- `disable` (wo) отключает управление на заданное время в секундах. Установите значение 0, чтобы возобновить управление, если оно отключено.

### Тревога
Обеспечивается системой управления охранной сигнализацией.

- Логическое состояние (true/false) сигнала тревоги `armed` (rw); запись значения `true` немедленно включит сигнализацию (без заданной задержки).
- `nextLevel` (ro) ID следующего уровня тревоги
- 1 = Молчание
- 2 = Акустический
- 3 = Оптический
- 4 = Внутренний
- 5 = Внешний
- 6 = Пульт дистанционного управления
- `nextLevelDelay` (ro) задержка следующего уровня в секундах
- `nextLevelDelayTotal` (ro) — общая задержка следующего уровня в секундах
- `level` (ro) идентификатор текущего уровня тревоги
- 1 = Молчание
- 2 = Акустический
- 3 = Оптический
- 4 = Внутренний
- 5 = Внешний
- 6 = Пульт дистанционного управления
- `startTime` (ro) — метка времени начала работы будильника.
- `armedDelay` (ro) задержка активации системы управления сигнализацией
- `armedDelayTotal` (ro) общая задержка включения сигнализации
- `sensors` (ro) список датчиков
- `disabledMove` (rw) — движение отключено (true) или нет (false)
- `delayedOn` (wo) запись любого значения в это состояние активирует сигнализацию с заданной задержкой.
- Команда `quit` (wo) записывает любое значение в это состояние, что подтверждает тревогу.

### Центральная сигнализация
Обеспечивается централизованной системой управления охранной сигнализацией.

- Логическое состояние (true/false) сигнала тревоги `armed` (rw); запись значения `true` немедленно включит сигнализацию (без заданной задержки).
- `delayedOn` (wo) запись любого значения в это состояние активирует сигнализацию с заданной задержкой
- Команда `quit` (wo) записывает любое значение в это состояние, что подтверждает тревогу.

### Будильник
Обеспечивается управлением будильником.

- Логическое состояние будильника `isEnabled` (rw) (true/false)
- `isAlarmActive` (ro) логическое значение (true/false), указывающее, срабатывает ли в данный момент сигнализация.
- `confirmationNeeded` (ro) логическое значение (true/false), указывающее, нужно ли пользователю подтвердить оповещение.
- `ringingTime` (ro) — обратный отсчет в секундах, показывающий, как долго будет звонить будильник, прежде чем он снова переключится на режим отложенного сигнала.
- `ringDuration` (rw) — длительность звонка будильника в секундах.
- `prepareDuration` (rw) — время подготовки в секундах
- `snoozeTime` (ro) секунд до окончания отложенного будильника
- `snoozeDuration` (rw) — длительность отложенного будильника в секундах
- `snooze` (wo) запись любого значения в это состояние откладывает текущий будильник.
- `dismiss` (wo) запись любого значения в это состояние отключает текущий сигнал тревоги

### Аудиозона
Предоставлено Music Server Zone.

- `serverState` (ro) состояние музыкального сервера:
- -3 = неизвестная/недействительная зона
- -2 = недостижимо
- -1 = неизвестно
- 0 = офлайн
- 1 = инициализация (загрузка, попытка доступа)
- 2 = онлайн
- `playState` (rw) состояние воспроизведения:
- -1 = неизвестно (это значение нельзя установить)
- 0 = остановлено (установка этого значения приостановит воспроизведение)
- 1 = пауза (установка этого значения приостановит воспроизведение)
- 2 = воспроизведение (установка этого значения запустит/возобновит воспроизведение)
- `clientState` (ro) состояние клиента:
- 0 = офлайн
- 1 = инициализация (загрузка, попытка доступа)
- 2 = онлайн
- `power` (rw) указывает, включено ли питание клиента или нет.
- `volume` (rw) текущий объем
- Зонам `maxVolume` (ro) можно назначить максимальный объем
- `shuffle` (rw) — включает ли функция перемешивания плейлиста.
- `sourceList` (ro) список, содержащий все избранные зоны
- Режим повтора `repeat` (rw):
- -1 = неизвестно
- 0 = выключено
- 1 = повторить все
- 2 = -не используется-
- 3 = повторить текущий элемент
- `songName` (ro) название песни
- `duration` (ro) — продолжительность всего трека, -1, если неизвестна (stream)
- `progress` (rw) текущее положение на треке
- `album` (ro) название альбома
- `artist` (ro) имя исполнителя
- `станция` (ro) название станции
- `жанр` (ро) название жанра
- `cover` (ro) URL изображения обложки песни/альбома
- `source` (rw) — текущий выбранный идентификатор источника (см. `sourceList` выше)
- `prev` (wo) запись любого значения в это состояние перемещает курсор на предыдущую дорожку
- `next` (wo) запись любого значения в это состояние перемещает курсор на следующую дорожку

### Центральное аудио
Предоставляется центральным музыкальным сервером.

- `control` (wo) устанавливает состояние воспроизведения для всех игроков (`true` = воспроизведение, `false` = пауза)

### Выбор цвета
Это устройство отображается только внутри контроллера освещения (LightController).

- `red` (rw) значение красного цвета в палитре выбора цвета
- `green` (rw) значение зеленого цвета в палитре цветов
- `blue` (rw) значение синего цвета в палитре цветов

Установка одного или нескольких из указанных выше состояний через ioBroker приведет к отправке команды на мини-сервер только примерно через 100 мс.
Это сделано для предотвращения многократного изменения цвета для одного и того же пользовательского ввода.

### Выбор цвета V2
Это устройство отображается только внутри контроллера освещения Light Controller V2 в программном обеспечении Loxone версии 9 и выше.

- `red` (rw) значение красного цвета в палитре выбора цвета
- `green` (rw) значение зеленого цвета в палитре цветов
- `blue` (rw) значение синего цвета в палитре цветов

Установка одного или нескольких из указанных выше состояний через ioBroker приведет к отправке команды на мини-сервер только примерно через 100 мс.
Это сделано для предотвращения многократного изменения цвета для одного и того же пользовательского ввода.

### Дневной таймер / IRC Daytimer
Предоставляется таймером/расписанием.

- `mode` (ro) текущий режим работы дневного таймера
- `mode-text` (ro) текущее название режима работы дневного таймера
- `override` (ro) оставшееся время таймера
- `value` (ro) текущее значение, `true` или `lal` для цифрового сигнала и значение для аналогового сигнала.
- `value-formatted` (ro) текущее отформатированное значение в виде текста
- Функция `needsActivation` (ro) доступна только в том случае, если элемент управления необходимо активировать.
- Функция `resetActive` (ro) остается активной до тех пор, пока активен вход сброса таймера.
- `pulse` (wo) активирует новое значение, если запись нуждается в активации.

### Диммер
Обеспечивается диммерами.

- `position` (rw) текущее положение диммера
- `min` (ro) текущее минимальное значение
- `max` (ro) текущее максимальное значение
- `step` (ro) текущее значение шага
- При записи любого значения в это состояние (при отсутствии записи) диммер устанавливается в последнее известное положение.
- `off` (wo) Запись любого значения в это состояние отключает диммер, устанавливает положение на 0, но запоминает последнее положение.

### EIBDimmer
Предоставляется диммерами EIB/KNX.

- `position` (rw) текущее положение диммера
- При записи любого значения в это состояние (при отсутствии записи) диммер устанавливается в последнее известное положение.
- `off` (wo) Запись любого значения в это состояние отключает диммер, устанавливает положение на 0, но запоминает последнее положение.

### Фрониус
Данные получены с помощью энергомонитора.

- `prodCurr` (ro) текущая производственная мощность
- `prodCurrDay` (ro) производство энергии за текущий день
- `prodCurrMonth` (ro) производство энергии за текущий месяц
- `prodCurrYear` (ro) производство энергии за текущий год
- Выработка энергии с момента установки: `prodTotal` (ro)
- `consCurr` (ro) потребляемая мощность в режиме реального времени
- `consCurrDay` (ro) энергия, потребленная в течение текущего дня
- `consTotal` (ro) — количество энергии, потребленной с момента установки
- `deliveryDay` (ro) неизвестно
- `earningsDay` (ro) сколько денег было заработано за текущий период либо за счет потребления произведенной электроэнергии самостоятельно, а не из сети, либо за счет экспорта неиспользованной произведенной электроэнергии в сеть
- `earningsMonth` (ro) сколько денег было заработано за текущий месяц
- `earningsYear` (ro) сколько денег было заработано за текущий год
- `earningsTotal` (ro) — сколько денег было заработано с момента создания
- `gridCurr` (ro) текущая потребляемая/поставляемая в сеть мощность. Если значение отрицательное, значит, в сеть подается электроэнергия.
- `batteryCurr` (ro) — текущая мощность зарядки/потребления батареи. Если значение отрицательное, батарея заряжается.
- `stateOfCharge` (ro) показывает состояние заряда батареи. 100 = полностью заряжена.
- `co2Factor` (ro) Сколько CO2 требуется для производства одного кВт⋅ч, используется для расчета экономии CO2
- `online` (ro) true: online, false: offline

### Ворота
Обеспечивается средствами управления воротами.

- `позиция` (ro) положение от 1 = вверх до 0 = вниз
- «активное» (rw) направление текущего движения затвора
- -1 = закрыть
- 0 = не движется
- 1 = открыто
- `preventOpen` (ro) предотвращает ли открытие двери
- `preventClose` (ro) предотвращает ли закрытие двери

Центральные ворота
Обеспечивается центральным управлением воротами.

- `open` (wo) открывает все ворота
- `close` (wo) закрывает все ворота
- `stop` (wo) останавливает все двигатели ворот.

### Счетчик часов
Предоставлено

- `total` (ro) общее количество секунд, в течение которых счетчик был активен на данный момент
- `remaining` (ro) — сколько секунд осталось до следующего технического обслуживания
- `lastActivation` (ro) метка времени последней активации счетчика
- `просрочено` (ro) `false`, если не просрочено, в противном случае требуется техническое обслуживание
- `maintenanceInterval` (ro) секунд до следующего технического обслуживания
- `active` (ro) указывает, активен ли счетчик в данный момент или нет.
- `overdueSince` (ro) секунд с момента превышения интервала обслуживания
- `reset` (wo) вызовет сброс следующих значений.
- осталось до интервала технического обслуживания
- просрочено до 0
- просроченоС момента до 0
- `resetAll` (wo) подобно `reset`, но также устанавливает
- сумма равна 0
- lastActivation to 0

### InfoOnlyAnalog
Обеспечивается виртуальными состояниями, а также переключателем Loxone Touch.

- `value` (ro) значение состояния (число) элемента управления
- `value-formatted` (ro), если настроено, форматированное значение состояния (с использованием формата "Unit" из конфигурации Loxone).

### InfoOnlyDigital
Обеспечивается виртуальными состояниями, а также переключателем Loxone Touch.

- Логическое состояние `active` (ro) (истина/ложь) элемента управления
- `active-text` (ro), если настроено, текстовый эквивалент состояния
- `active-image` (ro), если настроено, эквивалентное состояние изображения
- `active-color` (ro), если настроено, цветовой эквивалент состояния

![Настройки InfoOnlyDigital](../../../en/adapterref/iobroker.loxone/doc/loxone-config-info-only-digital.png)

### InfoOnlyText
Предоставляется виртуальными текстовыми состояниями.

- `text` (ro) значение состояния элемента управления
- `text-formatted` (ro), если настроено, форматированное значение состояния

### Домофон
Обеспечивается контроллерами дверей.

- `bell` (ro) звонит ли колокол
- Массив `lastBellEvents` (ro), содержащий временные метки для каждого события звонка, на которое не был дан ответ.
- `версия` (ro) Только для домофонов Loxone - текст, содержащий информацию о текущей установленной прошивке

версии

- `answer` (wo) запись любого значения в это состояние деактивирует звонок

В этом типе канала могут использоваться и другие устройства. Дополнительную информацию см. в соответствующей главе.

### Интеллектуальный комнатный контроллер V2
Обеспечивается интеллектуальным контроллером помещения версии 2, начиная с Miniserver 10.0.

TODO: Документация в настоящее время отсутствует.

### Жалость
Предлагаются различные виды жалюзи (автоматические и ручные).

- `up` (rw) означает ли это, что Jalousie поднимается выше.
- `down` (rw) означает, что Жалоузи движется вниз.
- «позиция» (ro) — положение жалюзи, число от 0 до 1.
    - Верхнее положение жалюзи = 0
    - Нижнее положение жалюзи = 1
- `shadePosition` (ro) — положение жалюзи (шторки), число от 0 до 1.
- Жалюзи не затенены = 0
- Жалюзи затенены = 1
- `safetyActive` (ro) используется только устройствами с автопилотом, это означает аварийное отключение.
- `autoAllowed` (ro) используется только теми, у кого есть автопилот
- `autoActive` (rw) используется только устройствами с автопилотом.
- `locked` (ro) только для устройств с автопилотом; это значение отображает выходной QI в конфигурации Loxone.
- `infoText` (ro) информирует, например, о причине блокировки или о том, что привело к активации защитной функции.
- `fullUp` (wo) запись любого значения в это состояние запускает движение полного подъема
- `fullDown` (wo) запись любого значения в это состояние запускает движение полного опускания
- `затенение` (wo) — присвоение любого значения этому состоянию затеняет жалюзи, устанавливая их в идеальное положение.

### Центральная жалюзи
Обеспечивается центральным управлением жалюзи.

- `autoActive` (rw) используется только устройствами с автопилотом.
- `fullUp` (wo) запись любого значения в это состояние запускает движение полного подъема
- `fullDown` (wo) запись любого значения в это состояние запускает движение полного опускания
- `тень` (wo) запись любого значения этому состоянию тени всех жалюзи для идеального положения

### Контроллер освещения
Предоставляется контроллерами освещения (отеля).
Сцены можно изменять только в приложениях Loxone, но их можно выбирать в ioBroker.

- `activeScene` (rw) номер текущей активной сцены
- 0: все выключено
- 1..8: сцена, определяемая пользователем (определение/обучение сцен должно выполняться с помощью инструментов Loxone)
- 9: все включено
- `sceneList` (ro) список всех сцен
- `плюс` (wo) переходит в следующую сцену
- «минус» (wo) изменения по сравнению с предыдущей сценой

В этом типе канала могут использоваться и другие устройства. Дополнительную информацию см. в соответствующей главе.

### Контроллер освещения V2
Предоставляется контроллерами освещения (отеля) в программном обеспечении Loxone версии 9 и выше.
Настроения можно изменять только в приложениях Loxone, но их можно выбирать и комбинировать в ioBroker.

- `moodList` (ro) список всех настроенных названий настроений
- `activeMoods` (rw) — список активных в данный момент названий настроений
- `favoriteMoods` (ro) список любимых названий настроений
- `additionalMoods` (ro) список названий нелюбимых настроений
- «плюс» (wo) переходит в следующее настроение
- «минус» (wo) меняет предыдущее настроение

В этом типе канала могут использоваться и другие устройства. Дополнительную информацию см. в соответствующей главе.

### Центральный контроллер освещения
Обеспечивается центральным контроллером освещения.

- `control` (wo) включает или выключает все лампы

### Почтовый ящик
Предоставлено компанией Paketsafe Air / Tree.

- `notificationsDisabledInput` (ro) Состояние поля ввода «Уведомления отключены»
- `packetReceived` (ro) Указывает, был ли получен пакет.
- `mailReceived` (ro) Указывает, получено ли письмо.
- `disableEndTime` (ro) — метка времени, пока уведомления не будут отключены.
- `confirmPacket` (wo) Подтверждает получение пакета
- `confirmMail` (wo) Подтверждение получения почты
- `disableNotifications` (wo) Отключает уведомления на x секунд; 0 секунд для отмены таймера

### Измеритель
Информация поступает со счетчиков коммунальных услуг.

- `actual` (ro) фактическое значение (число)
- `actual-formatted` (ro), если настроено, отформатированное фактическое значение состояния (с использованием формата "Unit" из конфигурации Loxone).
- `total` (ro) общее значение (число)
- `total-formatted` (ro), если настроено, отформатированное итоговое значение состояния (с использованием формата "Unit" из конфигурации Loxone).
- `reset` (wo) запись любого значения в это состояние сбрасывает общее значение

### Детектор присутствия
Обеспечивается датчиком присутствия.

- состояние присутствия «активный» (ro)
- `заблокировано` (ro) заблокированное состояние
- `events` (ro) количество событий
- `infoText` (ro) причина блокировки датчика присутствия

### Кнопка
Обеспечивается с помощью виртуальных кнопочных входов.

- `active` (rw) текущее состояние кнопки
- `pulse` (wo) запись любого значения в это состояние имитирует нажатие кнопки лишь на очень короткое время.

### Радио
Предусмотрено с помощью радиокнопок (8x и 16x).

- `activeOutput` (rw) ID текущего активного выхода или 0, если ни один выход не активен ("All Off")

### Удаленный
Предоставляется медиаконтроллером.
Базовая функциональность только для чтения.

- `active` (ro) true, если мини-сервер отправляет команды для переключения режимов или включения питания.
- `mode` (ro) клавиша для текущего режима или 0, если режим не выбран ("All Off")"
- `timeout` (ro) — время ожидания в миллисекундах

### Ползунок
Обеспечивается аналоговыми виртуальными входами.

- `value` (rw) текущее значение ползунка
- `value-formatted` (ro), если настроено, форматированное значение состояния (с использованием формата "Unit" из конфигурации Loxone).
- `error` (ro) указывает на недопустимое значение ползунка

### Дымовая сигнализация
Информация поступает со счетчиков коммунальных услуг.

- `nextLevel` (ro) ID следующего уровня тревоги
- 1 = Молчание
- 2 = Акустический
- 3 = Оптический
- 4 = Внутренний
- 5 = Внешний
- 6 = Пульт дистанционного управления
- `nextLevelDelay` (ro) задержка следующего уровня в секундах
- `nextLevelDelayTotal` (ro) общая задержка следующего уровня в секундах
- `level` (ro) идентификатор текущего уровня тревоги
- 1 = Молчание
- 2 = Акустический
- 3 = Оптический
- 4 = Внутренний
- 5 = Внешний
- 6 = Пульт дистанционного управления
- `sensors` (ro) список датчиков
- `acousticAlarm` (ro) состояние акустической сигнализации: false для неактивной и true для активной
- `testAlarm` (ro) показывает, активен ли тест будильник
- `alarmCause` (ro) причина тревоги:
- 1 = только датчик дыма
- 2 = только вода
- 3 = дым и вода
- 4 = только температура
- 5 = огонь и температура
- 6 = температура и вода
- 7 = огонь, температура и вода
- `startTime` (ro) — метка времени начала работы будильника
- Задержка `timeServiceMode` (rw) до отключения сервисного режима
- `mute` (wo) запись любого значения в это состояние заглушает сирену
- Команда `quit` (wo) записывает любое значение в это состояние, что подтверждает срабатывание датчика дыма.

### Выключатель
Обеспечивается виртуальными входными переключателями.

- `active` (rw) текущее состояние переключателя

### Состояние текста
Предоставлено "государством".

- `textAndIcon` (ro) текущее значение состояния

### Таймерный переключатель
Обеспечивается переключателями на лестничной клетке и многофункциональными выключателями.

- `deactivationDelayTotal` (ro) секунд, как долго выходной сигнал будет активен, если используется таймер.
- `deactivationDelay` (ro) обратный отсчет до деактивации выхода
- 0 = выход выключен
- -1 = выход постоянно включен
- в противном случае отсчет будет начинаться с deactivationDelayTotal
- При включении (без записи) любого значения в это состояние переключатель включается навсегда без задержки деактивации.
- `off` (wo) запись любого значения в это состояние отключает переключатель
- `pulse` (wo) подает импульсы на переключатель:
- deactivationDelay = 0
- Начнётся обратный отсчёт от deactivationDelayTotal до 0.
- если это выключатель на лестничной клетке:
- deactivationDelay = -1
- Никакого эффекта, останется включенным постоянно.
- deactivationDelay > 0
- Обратный отсчет перезапускается
- если это многофункциональный переключатель
- отключает его (из режима обратного отсчета или в постоянно включенном состоянии)

### Трекер
Обеспечивается переключателями на лестничной клетке и многофункциональными выключателями.

- `entries` (ro) список записей, возвращаемых мини-сервером

### UpDownAnalog
Обеспечивается виртуальным вводом (кнопки «Вверх-Вниз»).

- `value` (rw) текущее значение входных данных
- `value-formatted` (ro), если настроено, форматированное значение состояния (с использованием формата "Unit" из конфигурации Loxone).
- `error` (ro) указывает на недопустимое значение ползунка

### ValueSelector
Выбор ценности.

- `value` (rw) текущее значение
- `min` (ro) текущее минимальное значение
- `max` (ro) текущее максимальное значение
- `step` (ro) текущее значение шага

### WindowMonitor
Информация поступает со счетчиков коммунальных услуг.

- `numOpen` (ro) количество открытых окон и дверей
- `numClosed` (ro) количество закрытых окон и дверей
- `numTilted` (ro) количество наклоненных окон и дверей
- `numOffline` (ro) количество окон и дверей, которые недоступны
- `numLocked` (ro) количество заблокированных окон и дверей
- `numUnlocked` (ro) количество разблокированных окон и дверей

Сумма значений из всех этих состояний равна количеству контролируемых окон и дверей. Окна/двери с двумя состояниями всегда будут учитываться в «наихудшем» состоянии.

Для каждого контролируемого окна/двери будет устройство с индексом в качестве идентификатора и заданным именем. Они имеют следующие состояния:

- `closed` (ro) окно/дверь закрыто
- `tilted` (ro) окно/дверь наклонены
- `open` (ro) окно/дверь открыты
- `locked` (ro) окно/дверь заперты
- `unlocked` (ro) окно/дверь не заперты

## Сервер погоды
Информация с метеорологического сервера предоставляется в виде устройства с несколькими каналами.
Устройство называется `WeatherServer`.
Оно содержит:

- канал «Фактические данные» с текущими значениями погоды.
- для каждого часа прогноза есть отдельный канал, называемый `HourXX`, где `XX` — количество часов, начиная с настоящего момента.

Каждый канал содержит следующие состояния:

- `barometricPressure`: числовое значение барометрического давления
- `barometricPressure-formatted`: отформатированное значение барометрического давления с указанием единицы измерения.
- `dewPoint`: числовое значение точки росы
- `dewPoint-formatted`: отформатированное значение точки росы с указанием единицы измерения
- `perceivedTemperature`: числовое значение воспринимаемой температуры
- `perceivedTemperature-formatted`: отформатированное значение воспринимаемой температуры с указанием единицы измерения.
- `осадки`: числовое значение количества осадков
- `precipitation-formatted`: отформатированное значение осадков с указанием единицы измерения.
- `relativeHumidity`: числовое значение относительной влажности
- `relativeHumidity-formatted`: отформатированное значение относительной влажности с указанием единицы измерения.
- `solarRadiation`: значение солнечной радиации
- `temperature`: числовое значение температуры
- `temperature-formatted`: отформатированное значение температуры с указанием единицы измерения.
- `timestamp`: метка времени данных в формате `value.time` (время JavaScript)
- `weatherType`: числовое значение перечисления типов погоды
- `weatherType-text`: текстовое представление типа погоды
- `windDirection`: значение направления ветра
- `windSpeed`: значение скорости ветра
- `windSpeed-formatted`: отформатированное значение скорости ветра с указанием единицы измерения.

## Неподдерживаемые типы элементов управления
Когда Loxone добавляет новые типы элементов управления, чаще всего этот адаптер не сразу начинает их поддерживать.

В этом случае перед именем элемента управления будет стоять "Unknown:". Например: `Unknown: Wallbox`

Эти элементы управления будут содержать все состояния, сообщаемые мини-сервером, но все они будут представлять собой строки только для чтения.

Если вам требуется улучшенная поддержка нового типа элементов управления, выполните действия, описанные в следующем разделе, чтобы запросить добавление новой функции.

**Sentry:** Информация о неподдерживаемых типах элементов управления будет передаваться разработчикам через Sentry. Таким образом, вы сможете получить новые элементы управления в следующем релизе, не запрашивая их самостоятельно.

## Сообщения об ошибках и предложения по улучшению
Пожалуйста, используйте репозиторий GitHub для сообщения об ошибках или запроса новых функций.

Если вам требуется неподдерживаемый тип управления, укажите его имя так, как оно отображается в журнале ошибок ioBroker, а также полное содержимое устройства в дереве объектов ioBroker:

Пример файла журнала для "LightController":

![Журнал отсутствующего элемента управления LightController](../../../en/adapterref/iobroker.loxone/doc/log-missing-control-type.png)

Нативные значения из ioBroker > Объекты

![Подробности об отсутствующем элементе управления LightController](../../../en/adapterref/iobroker.loxone/doc/details-missing-control-type.png)

## Правовые аспекты
Данный проект не имеет прямой или косвенной связи с компанией Loxone Electronics GmbH.

Loxone и Miniserver являются зарегистрированными товарными знаками компании Loxone Electronics GmbH.

## Changelog

<!--
    Placeholder for the next version (at the beginning of the line):
    ### **WORK IN PROGRESS**
-->
### 4.0.0 (2025-12-11)

- (raintonr) Set correct min/max target on IRCv2 when in override (#528)
- (raintonr) Fix compatibility with js-controller 7.1 (fixes #730)
- (UncleSamSwiss) Recreate project structure using latest create-adapter
- (mpaulustsx) Basic AudioZoneV2 implementation (#430)

### 3.0.1 (2023-03-30)

- (raintonr) Added info statistics (#364)
- (raintonr) Added missing states from IRCv2 (#365)
- (raintonr) Added basic functionality for Remote (Media Controller)
- (raintonr) Fixed ack overwrites of fast changing states (#399) and general ack improvements
- (raintonr) Fix crash when state changes occur during Miniserver reboot or otherwise unavailable (#298)
- (raintonr) Release script and other dependency updates

### 3.0.0 (2021-12-29)

- (tdesmet) Changed to lxcommunicator (fixes #210)
- (UncleSamSwiss) Updated all dependencies

### 2.2.3 (2021-07-06)

- (UncleSamSwiss) Reduced number of Sentry reports for unsupported controls.

### 2.2.2 (2021-06-23)

- (UncleSamSwiss) Explicitly setting adapter tier to 2.
- (UncleSamSwiss) Added support for Daytimer (IOBROKER-LOXONE-1Z)
- (UncleSamSwiss) Added support for Radio (IOBROKER-LOXONE-21)
- (UncleSamSwiss) Added support for Fronius (IOBROKER-LOXONE-1Y)
- (UncleSamSwiss) Added support for IRCDaytimer (IOBROKER-LOXONE-27)
- (UncleSamSwiss) Added support for Hourcounter (IOBROKER-LOXONE-23)
- (UncleSamSwiss) Added support for InfoOnlyText (IOBROKER-LOXONE-29)
- (UncleSamSwiss) Fixed issues with Lumitech color pickers (#150)

### 2.2.1 (2021-05-18)

- (UncleSamSwiss) Fixed typo causing "Cannot read property 'off' of undefined" (IOBROKER-LOXONE-2R, #72)
- (UncleSamSwiss) Improved Sentry reporting for structure file

### 2.2.0 (2021-05-17)

- (UncleSamSwiss) Unknown/unsupported controls are now shown with their states as read-only strings
- (raintonr) Fixes for auto-position based on percentage (#76)
- (raintonr) Added support for IRoomControllerV2 (#22)
- (UncleSamSwiss) Added experimental support for EIBDimmer (#15)
- (UncleSamSwiss) Added support for ValueSelector (#36)
- (UncleSamSwiss) Added support for TextState (#73)
- (UncleSamSwiss) Added support for UpDownAnalog (#57)
- (UncleSamSwiss) Fixed some "State has wrong type" warnings (#99, #128)
- (UncleSamSwiss) Added support for Lumitech color picker (#44)
- (UncleSamSwiss) Weather server data can now be filtered (#131)
- (UncleSamSwiss) Added support for PresenceDetector (IOBROKER-LOXONE-1R)
- (UncleSamSwiss) Added support for AAL Smart Alarm (IOBROKER-LOXONE-1X)
- (UncleSamSwiss) Added support for AAL Emergency Button (IOBROKER-LOXONE-1W)
- (UncleSamSwiss) Added support for Paketsafe (IOBROKER-LOXONE-1P)

### 2.1.0 (2020-12-21)

- (raintonr) Fixed: activeMoods can get stuck/not sync properly; all events is now handled with a queue (#58, #61, #62)
- (raintonr) Added open/close buttons to Garage/Gate Control (#59, #60)
- (pinkit) Added support for virtual text inputs (#48)
- (UncleSamSwiss) Updated to the latest adapter template
- (UncleSamSwiss) Changed log level of "Currently unsupported control type" message to "info" (#65)

### 2.0.2 (2020-10-26)

- (UncleSamSwiss) Fixed color picker updates (#52)
- (UncleSamSwiss) TimedSwitch to have `on`/`off` instead of `active` (#53)
- (UncleSamSwiss) Cleaning illegal characters for room and function names (#54)

### 2.0.1 (2020-09-24)

- (UncleSamSwiss) Fixed percentage states always showing 0% (#49)
- (UncleSamSwiss) Fixed analog virtual inputs wouldn't set the value 0 from ioBroker (#47)
- (UncleSamSwiss) Added translations to package information.

### 2.0.0

- **BREAKING:** Since the password is now encrypted, you will need to enter the password again after an update to this version!
- (UncleSamSwiss) Updated to the latest development tools and changed to the TypeScript language

### 1.1.0

- (UncleSamSwiss) Added support for Miniserver Gen 2
- (sstroot) RGB for LightControllerV2
- (Apollon77) Updated CI Testing

### 1.0.0

- (UncleSamSwiss) Fixed issue that was resetting the custom settings and cloud smartName
- (alladdin) Fixed connection issues with Loxone Miniserver 10
- (UncleSamSwiss) Changed all write-only "switch"es to "button"s
- (UncleSamSwiss) Added support for AlarmClock control
- (Apollon77) Updated CI Testing

### 0.4.0

- (UncleSamSwiss) Improved support for Loxone Config 9
- (UncleSamSwiss) Changed all color choosers (i.e. color lights) to use RGB (previously HSV/HSL was completely wrong)

### 0.3.0

- (UncleSamSwiss) Control names only synchronized on the first time by default (configurable); users can change control names the way they want

### 0.2.1

- (UncleSamSwiss) Added support for Slider control

### 0.2.0

- (UncleSamSwiss) Added proper support for Alexa for the following controls: Alarm, AudioZone, Gate, Jalousie and LightController

### 0.1.1

- (UncleSamSwiss) Added support for synchronizing rooms and functions (categories) from Loxone Miniserver

### 0.1.0

- (UncleSamSwiss) Added support for many more controls including commands from ioBroker to Loxone Miniserver

### 0.0.3

- (Bluefox) Formatting, refactoring and Russian translations

### 0.0.2

- (UncleSamSwiss) Added creation of an empty device for all unsupported controls (helps figure out its configuration)

### 0.0.1

- (UncleSamSwiss) Initial version

## License

Copyright 2025 UncleSamSwiss

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.