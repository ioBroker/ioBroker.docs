---
translatedFrom: en
translatedWarning: Если вы хотите отредактировать этот документ, удалите поле «translationFrom», в противном случае этот документ будет снова автоматически переведен
editLink: https://github.com/ioBroker/ioBroker.docs/edit/master/docs/ru/adapterref/iobroker.ai-assistant/README.md
title: ioBroker.ai-помощник
hash: eLCRLymT6+1j/OAxF3jn8OqXnUitr9qaI0KB/YSlvXM=
---
![Логотип](../../../en/adapterref/iobroker.ai-assistant/admin/ai-assistant.png)

![версия НПМ](https://img.shields.io/npm/v/iobroker.ai-assistant.svg)
![Загрузки](https://img.shields.io/npm/dm/iobroker.ai-assistant.svg)
![Количество установок](https://iobroker.live/badges/ai-assistant-installed.svg)
![Текущая версия в стабильном репозитории](https://iobroker.live/badges/ai-assistant-stable.svg)
![НПМ](https://nodei.co/npm/iobroker.ai-assistant.png?downloads=true)

# IoBroker.ai-помощник
**Тесты:** ![Тест и выпуск](https://github.com/ToGe3688/ioBroker.ai-assistant/workflows/Test%20and%20Release/badge.svg)

## Обзор
Адаптер ioBroker AI Assistant запускает интеллектуального помощника в вашей системе ioBroker.
Помощник может использоваться для взаимодействия с вашей системой ioBroker, установки инструкций на основе времени, инструкций на основе триггеров и вызова пользовательских функций.
Помощник может быть настроен с использованием различных языковых моделей от разных поставщиков (например, OpenAI, Anthropic, Perplexity, OpenRouter) или пользовательских/самостоятельных моделей.
Помощник может использоваться для автоматизации задач, управления вашим умным домом или предоставления информации.

## Функции
- Персонализируйте имя и личность вашего помощника
- Список, чтение и запись состояний ioBroker
- Установите тайм-ауты и задания cron для выполнения инструкций, зависящих от времени
- Установите триггеры для состояний ioBroker с условиями, которые запускают инструкции при выполнении условий.
- Определяйте пользовательские функции с вашими собственными данными и логикой
- Используйте вкладку администратора для общения с вашим персональным помощником.

## Поддерживаемые поставщики
- **Антропный**: [anthropic.com](https://anthropic.com)
- **OpenAI**: [openai.com](https://openai.com)
- **Недоумение**: [perplexity.ai](https://perplexity.ai)
- **OpenRouter**: [openrouter.ai](https://openrouter.ai)
- **Deepseek**: [deepseek.com](http://deepseek.com/)
- **Пользовательские/самостоятельно размещенные модели** (например, LM Studio, LocalAI)

---

## Быстрый старт
1. Установите адаптер.
2. Настройте провайдера (например, OpenAI, Anthropic, Perplexity, OpenRouter) и получите токен API.
3. Настройте адаптер с помощью API-токена.
4. Выберите модель, которую вы хотите использовать для помощника.
5. Добавьте несколько состояний ioBroker на вкладке «Объекты», которые будут доступны помощнику.
6. Начните общаться с помощником, отправляя текстовые запросы в состояние `text_request` помощника и получая ответы из состояния `text_response` или используйте пользовательскую вкладку администратора с надписью «Помощник».

---

## Протестированные модели
Следующие модели были протестированы с адаптером и зарекомендовали себя с хорошей стороны:

- Клод 3.5 Сонет (Антропный)
- gpt-4o-mini (OpenAI)
- meta-llama/llama-3.3-70b-instruct (OpenRouter)
- deepseek/deepseek-chat (OpenRouter)
- x-ai/grok-beta (OpenRouter)
- perplexity/llama-3.1-sonar-huge-128k-online (Perplexity)
- perplexity/llama-3.1-sonar-large-128k-online (Perplexity)

---

## Конфигурация
### Помощник
Настройте своего помощника, используя следующие параметры:

| **Настройка** | **Описание** |
| ---------------------- | ---------------------------------------------------------------------------------------------------------- |
| **Имя** | Имя вашего помощника. |
| **Модель** | Выберите модель LLM, которую должен использовать ваш помощник (настраивается в разделе «Поставщики»). |
| **Личность** | Опишите личность вашего помощника. |
| **Язык** | Выберите язык, который будет использовать ваш помощник (в настоящее время поддерживаются только английский и немецкий языки) |
| **Отладка / Вывод CoT** | При активации внутренние мысли и процессы, используемые помощником, записываются в состояние text_response. |
| **История сообщений** | Включить предыдущие сообщения (для поведения, подобного чат-боту). Установите значение 0 для одноразовых инструментов, чтобы минимизировать использование токенов. |
| **Температура** | Контролирует креативность/последовательность ответа. |
| **Макс. токены** | Ограничивает количество токенов ответа. |
| **Задержка повтора** | Задержка между повторными попытками, если запрос не выполнен |
| **Максимальное количество повторов** | Максимальное количество повторов на запрос. |

---

### Объекты
### ВНИМАНИЕ: Будьте осторожны с состояниями, к которым вы предоставляете помощнику доступ, так как он может читать и записывать данные во все состояния, к которым у него есть доступ.
Настройте объекты и состояния ioBrokers, к которым помощник должен иметь доступ.

**ПРИМЕЧАНИЕ: При импорте или добавлении объектов обязательно добавляйте только точки данных с типом «состояние», которые можно контролировать напрямую или которые содержат значение для чтения!**

| **Настройка** | **Описание** |
| -------------------------- | --------------------------------------------------------------------------------------------------------- |
| **Импорт из Enum.Rooms** | Импортирует все ваши состояния из сортировки enum.rooms в ioBroker. (Перезаписывает все ранее заданные объекты!) |
| **Сортировка** | Все объекты с одинаковым полем сортировки будут представлены помощнику в группе (например, в комнате) |
| **Имя** | Используйте описательное имя, чтобы помощник понимал функцию объектов |
| **Объект** | Идентификатор состояния ioBroker |

---

### Функции
Настройте пользовательские функции, которые должны быть доступны помощнику.
Ваши пользовательские функции должны записывать ответ на состояние, которое вы определили в поле `State (Response)` после записи `State (Request)`.
Результат может быть в любом формате, который вам нравится (например, JSON, простой текст), просто убедитесь, что помощник может его понять.
Совет: вы можете использовать [Адаптер AI-Toolbox](https://github.com/ToGe3688/ioBroker.ai-toolbox) для интеграции своего помощника с пользовательскими инструментами ИИ.

**ПРИМЕЧАНИЕ: Если вы не напишете ответ в поле `State (Response)` в течение 60 секунд, вызов функции завершится ошибкой!**

| **Настройка** | **Описание** |
| -------------------- | ------------------------------------------------------------------------------------------------ |
| **Сортировка** | Все объекты с одинаковым полем сортировки будут представлены помощнику в группе (например, в комнате) |
| **Имя** | Используйте описательное имя для пользовательской функции |
| **Описание** | Опишите, что делает ваша функция, чтобы помощник понимал, когда ее вызывать |
| **Состояние (Запрос)** | Это состояние будет записано в строку помощником при вызове функции |
| **Состояние (Ответ)** | Это состояние будет считано помощником, чтобы получить ответ функции |

---

### Поставщики LLM
Настройте каждого поставщика ИИ индивидуально:

#### Антропный
| **Настройка** | **Описание** |
| ------------- | ------------------------------- |
| **API-токен** | Введите свой Anthropic API-токен. |
| **Модели** | Укажите модели для использования. |

#### OpenAI
| **Настройка** | **Описание** |
| ------------- | ---------------------------- |
| **API-токен** | Введите свой API-токен OpenAI. |
| **Модели** | Укажите модели для использования. |

#### Недоумение
| **Настройка** | **Описание** |
| ------------- | -------------------------------- |
| **API-токен** | Введите свой API-токен Perplexity. |
| **Модели** | Укажите модели для использования. |

#### Открытый маршрутизатор
| **Настройка** | **Описание** |
| ------------- | -------------------------------- |
| **API-токен** | Введите свой API-токен OpenRouter. |
| **Модели** | Укажите модели для использования. |

#### Обычай
| **Настройка** | **Описание** |
| ---------------------------------- | ------------------------------------------------------------------------- |
| **URL-адрес сервера вывода** | URL-адрес настраиваемого/размещенного самостоятельно сервера вывода. |
| **API-токен для сервера вывода** | API-токен для вашего сервера вывода. |
| **Модели** | Укажите модели для использования. |
| **Примечание** | Обеспечьте соответствие общим стандартам AI LLM API (например, LM Studio API). |

---

## Использование
### Простой разговор
Вы можете взаимодействовать со своим помощником, отправляя текстовые запросы в состояние `text_request` и получая ответы из состояния `text_response`.

#### Вызов функции
Помощник может вызывать все доступные функции. Он делает это, определяя функцию для вызова на основе текстового запроса. Если у вас включен Debug/CoT Output, вы можете увидеть внутренний процесс помощника в состоянии `text_response`.

#### Взаимодействие состояний
Помощник может перечислять, читать и записывать несколько состояний ioBroker одновременно. Вы можете использовать вкладку `Objects`, чтобы определить, к каким состояниям помощник должен иметь доступ.

#### Инструкции, основанные на времени
Помощник может устанавливать тайм-ауты для относительных временных инструкций и cronjobs для определенного времени. Cronjobs будут перечислены в дереве объектов помощника под `Cronjobs`.
Тайм-ауты будут только временными и будут удалены после выполнения тайм-аута или перезапуска адаптера.
При срабатывании тайм-аута или cronjob помощник будет разбужен, и инструкция будет выполнена.

#### Инструкции на основе триггера
Помощник может устанавливать триггеры в состояниях ioBroker с дополнительными условиями, которые запускают инструкции при выполнении условий. Триггеры будут перечислены в дереве объектов помощника под `Triggers`.
При срабатывании помощник будет разбужен, и инструкция будет выполнена.

#### Пользовательские функции
Помощник может вызывать пользовательские функции, которые вы определили на вкладке `Functions`. Помощник запишет запрос в поле `State (Request)` и ожидает ответ в поле `State (Response)`.

#### Цепочка функций
Помощник может использоваться для объединения нескольких функций в цепочку. Например, вы можете настроить cronjob, который при выполнении начнет проверку состояний ioBroker, а затем вызовет пользовательскую функцию с результатами.

#### Очистка истории чата
Иногда бывает полезно сбросить историю чата. Вы можете сделать это, попросив помощника очистить историю. Это удалит все предыдущие сообщения из памяти помощника. (например, `Clear history` или `Forget the previous messages`)

## Дополнительная информация
### Статистика
Статистика регистрируется для вашего помощника и может быть просмотрена в дереве объектов `Statistics`.

| **Точка данных** | **Описание** |
| -------------------------------- | ------------------------------------------------------- |
| **.statistics.lastRequest** | Временная метка последнего запроса. |
| **.statistics.requestCount** | Количество отправленных запросов помощнику |
| **.statistics.messages\*** | JSON-массив истории сообщений (если история сообщений > 0). |
| **.statistics.clear_messages\*** | Кнопка очистки истории сообщений. |
| **.statistics.tokens_input** | Общее количество использованных входных токенов. |
| **.statistics.tokens_output** | Общее количество использованных выходных токенов. |

## Разработка
Этот адаптер все еще находится в разработке и может содержать ошибки. Пожалуйста, сообщайте о любых проблемах, с которыми вы столкнетесь.

### Отладка
Установите уровень журнала на `debug` в интерфейсе администратора ioBroker для получения подробных журналов.

## Changelog

<!--
	Placeholder for the next version (at the beginning of the line):
	### **WORK IN PROGRESS**
-->
### 0.1.4 (2025-06-05)
* (@ToGe3688) Added tab to interact with the assitant in the admin adapter
* (@ToGe3688) Added a custom timeout parameter
* (@GermanBluefox) Corrected using of the states with the multi-language names

### 0.1.3 (2025-29-01)
* (@ToGe3688) Added support for Deepseek as api provider
* (@ToGe3688) Better display of providers in model selection for admin config
* (@ToGe3688) Fixed object hirarchy 
* (@ToGe3688) Fixed state roles
* (@ToGe3688) Fixed onStateChange handler

### 0.1.2 (2025-12-01)
- (@ToGe3688) Better error handling for Provider APIs
- (@ToGe3688) Anthropic API Versioning

### 0.1.1 (2025-12-01)

- (@ToGe3688) Better error handling for Provider APIs

### 0.1.0 (2025-04-01)

- (@ToGe3688) Beta Release

### 0.0.3 (2024-31-12)

- (@ToGe3688) Improved handling of malformed model responses
- (@ToGe3688) Fixed a bug where the names of the states were not provided to the assistant

### 0.0.2 (2024-30-12)

- (@ToGe3688) Fixed Bug in OpenAI Provider

### 0.0.1 (2024-30-12)

- (@ToGe3688) initial release

## License

The MIT License (MIT)

Copyright (c) 2024-2025 ToGe3688 <toge3688@gmail.com>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.